import{a as St}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-KFVSSOHC.js";import{a as oo}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-RBQQMXSW.js";import{a as Ae,b as je,c as Or,d as Rr,e as Fr,f as bt,g as vt,h as Fe,j as Yr,k as zi,l as Z,m as Vr,n as jr,p as cn,q as Zr,r as Xr,s as Jr,t as Qr,u as eo,v as to}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-27R6HPQR.js";import{c as Te,d as an,e as Dr,f as ft,g as Br,h as wt,k as ke,n as Kr,p as Hr,r as Wr,s as Gr,u as qr}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-L34OG5QJ.js";import"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-H6TFEBCH.js";import{a as Re,b as Fi,c as Ir,d as Ar,e as Le,s as no,u as ro}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-KCNBWBOP.js";import{a as Mr,d as yt,e as ae}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-C5YY5APJ.js";import{a as Bn,b as Ln,c as Un,d as Lr,e as Ur,g as ye,h as $r,l as Ue,m as ht}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-JVDQLBFG.js";import{a as sn,b as Tr,c as kr,d as _r,g as Nr,h as Pr,i as zr}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-447XMF72.js";import{a as Rn,b as nr,c as or,e as jt,g as he,h as Zt,i as re}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-IZSMNAZK.js";import{A as Gt,B as Yn,Bb as mt,C as qt,Cb as on,D as De,Db as Er,E as Yt,Ea as ar,F as ct,Fa as oe,G as Vn,Gb as xr,H as Vt,Hb as gt,I as jn,J as Zn,Ja as en,K as Xn,Ka as tn,L as Jn,La as Be,M as qe,Ma as lt,N as Qn,O as er,Oa as se,P as tr,Qa as cr,Ra as dr,S as dt,Sa as lr,Sb as $e,T as k,Ta as ut,Tb as V,U as Ee,Ua as pt,V as Ye,Va as ur,Wa as Ve,X as rr,Y as D,Ya as pr,Z as ne,a as Ui,b as $i,bb as mr,c as R,cb as gr,d as z,db as fr,e as f,f as K,fa as Xt,fb as hr,g as Ce,gb as yr,h as N,hb as br,i as ue,ib as xe,j as Dn,jb as nn,k as w,ka as ir,l as $n,la as sr,m as X,mb as vr,n as Fn,nb as wr,o as q,ob as Ie,p as Ge,pb as rn,q as T,r as zn,s as Kn,sa as Jt,sb as Sr,t as Hn,u as Wn,ua as Qt,v as Gn,w as qn,wa as pe,x as O,xa as J,xb as Q,y as Wt,z as fe,zb as Cr}from"./660adeaef834803cf359b38ba4fda763cc5dcd22-chunk-SA4NI5WW.js";var xi=Ui((et,Bt)=>{f();(function(t,e){"use strict";var n="0.7.33",r="",o="?",i="function",s="undefined",d="object",u="string",g="major",a="model",p="name",l="type",c="vendor",m="version",h="architecture",b="console",y="mobile",v="tablet",E="smarttv",U="wearable",C="embedded",P=350,B="Amazon",M="Apple",Y="ASUS",te="BlackBerry",le="Browser",Se="Chrome",Ri="Edge",tt="Firefox",nt="Google",In="Huawei",Lt="LG",Ut="Microsoft",An="Motorola",rt="Opera",$t="Samsung",Tn="Sharp",ot="Sony",Ft="Xiaomi",zt="Zebra",kn="Facebook",Di=function(x,_){var I={};for(var F in x)_[F]&&_[F].length%2===0?I[F]=_[F].concat(x[F]):I[F]=x[F];return I},it=function(x){for(var _={},I=0;I<x.length;I++)_[x[I].toUpperCase()]=x[I];return _},_n=function(x,_){return typeof x===u?Ke(_).indexOf(Ke(x))!==-1:!1},Ke=function(x){return x.toLowerCase()},Bi=function(x){return typeof x===u?x.replace(/[^\d\.]/g,r).split(".")[0]:e},Kt=function(x,_){if(typeof x===u)return x=x.replace(/^\s\s*/,r),typeof _===s?x:x.substring(0,P)},He=function(x,_){for(var I=0,F,A,at,L,We,ie;I<_.length&&!We;){var Mn=_[I],On=_[I+1];for(F=A=0;F<Mn.length&&!We;)if(We=Mn[F++].exec(x),We)for(at=0;at<On.length;at++)ie=We[++A],L=On[at],typeof L===d&&L.length>0?L.length===2?typeof L[1]==i?this[L[0]]=L[1].call(this,ie):this[L[0]]=L[1]:L.length===3?typeof L[1]===i&&!(L[1].exec&&L[1].test)?this[L[0]]=ie?L[1].call(this,ie,L[2]):e:this[L[0]]=ie?ie.replace(L[1],L[2]):e:L.length===4&&(this[L[0]]=ie?L[3].call(this,ie.replace(L[1],L[2])):e):this[L]=ie||e;I+=2}},Ht=function(x,_){for(var I in _)if(typeof _[I]===d&&_[I].length>0){for(var F=0;F<_[I].length;F++)if(_n(_[I][F],x))return I===o?e:I}else if(_n(_[I],x))return I===o?e:I;return x},Li={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Nn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Pn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,m],[/opios[\/ ]+([\w\.]+)/i],[m,[p,rt+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[p,rt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[p,"UC"+le]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[m,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+le],m],[/\bfocus\/([\w\.]+)/i],[m,[p,tt+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[p,rt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[p,rt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI "+le]],[/fxios\/([-\w\.]+)/i],[m,[p,tt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+le]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+le],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,kn],m],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[p,Se+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Se+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[p,"Android "+le]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[m,Ht,Li]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[p,tt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,m],[/(cobalt)\/([\w\.]+)/i],[p,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,Ke]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,r,Ke]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,Ke]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[c,$t],[l,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[c,$t],[l,y]],[/((ipod|iphone)\d+,\d+)/i],[a,[c,M],[l,y]],[/(ipad\d+,\d+)/i],[a,[c,M],[l,v]],[/\((ip(?:hone|od)[\w ]*);/i],[a,[c,M],[l,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[c,M],[l,v]],[/(macintosh);/i],[a,[c,M]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[c,In],[l,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[c,In],[l,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[c,Ft],[l,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[c,Ft],[l,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[c,"OPPO"],[l,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[c,"Vivo"],[l,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[c,"Realme"],[l,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[c,An],[l,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[c,An],[l,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[c,Lt],[l,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[c,Lt],[l,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[c,"Lenovo"],[l,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[c,"Nokia"],[l,y]],[/(pixel c)\b/i],[a,[c,nt],[l,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[c,nt],[l,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[c,ot],[l,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[c,ot],[l,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[c,"OnePlus"],[l,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[c,B],[l,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[c,B],[l,y]],[/(playbook);[-\w\),; ]+(rim)/i],[a,c,[l,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[c,te],[l,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[c,Y],[l,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[c,Y],[l,y]],[/(nexus 9)/i],[a,[c,"HTC"],[l,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[a,/_/g," "],[l,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[c,"Acer"],[l,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[c,"Meizu"],[l,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[c,Tn],[l,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,a,[l,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,a,[l,v]],[/(surface duo)/i],[a,[c,Ut],[l,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[c,"Fairphone"],[l,y]],[/(u304aa)/i],[a,[c,"AT&T"],[l,y]],[/\bsie-(\w*)/i],[a,[c,"Siemens"],[l,y]],[/\b(rct\w+) b/i],[a,[c,"RCA"],[l,v]],[/\b(venue[\d ]{2,7}) b/i],[a,[c,"Dell"],[l,v]],[/\b(q(?:mv|ta)\w+) b/i],[a,[c,"Verizon"],[l,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[c,"Barnes & Noble"],[l,v]],[/\b(tm\d{3}\w+) b/i],[a,[c,"NuVision"],[l,v]],[/\b(k88) b/i],[a,[c,"ZTE"],[l,v]],[/\b(nx\d{3}j) b/i],[a,[c,"ZTE"],[l,y]],[/\b(gen\d{3}) b.+49h/i],[a,[c,"Swiss"],[l,y]],[/\b(zur\d{3}) b/i],[a,[c,"Swiss"],[l,v]],[/\b((zeki)?tb.*\b) b/i],[a,[c,"Zeki"],[l,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],a,[l,v]],[/\b(ns-?\w{0,9}) b/i],[a,[c,"Insignia"],[l,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[c,"NextBook"],[l,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],a,[l,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],a,[l,y]],[/\b(ph-1) /i],[a,[c,"Essential"],[l,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[c,"Envizen"],[l,v]],[/\b(trio[-\w\. ]+) b/i],[a,[c,"MachSpeed"],[l,v]],[/\btu_(1491) b/i],[a,[c,"Rotor"],[l,v]],[/(shield[\w ]+) b/i],[a,[c,"Nvidia"],[l,v]],[/(sprint) (\w+)/i],[c,a,[l,y]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,Ut],[l,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[c,zt],[l,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[c,zt],[l,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,a,[l,b]],[/droid.+; (shield) bui/i],[a,[c,"Nvidia"],[l,b]],[/(playstation [345portablevi]+)/i],[a,[c,ot],[l,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[c,Ut],[l,b]],[/smart-tv.+(samsung)/i],[c,[l,E]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,$t],[l,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,Lt],[l,E]],[/(apple) ?tv/i],[c,[a,M+" TV"],[l,E]],[/crkey/i],[[a,Se+"cast"],[c,nt],[l,E]],[/droid.+aft(\w)( bui|\))/i],[a,[c,B],[l,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[c,Tn],[l,E]],[/(bravia[\w ]+)( bui|\))/i],[a,[c,ot],[l,E]],[/(mitv-\w{5}) bui/i],[a,[c,Ft],[l,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,Kt],[a,Kt],[l,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,E]],[/((pebble))app/i],[c,a,[l,U]],[/droid.+; (glass) \d/i],[a,[c,nt],[l,U]],[/droid.+; (wt63?0{2,3})\)/i],[a,[c,zt],[l,U]],[/(quest( 2)?)/i],[a,[c,kn],[l,U]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[l,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[l,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[l,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,y]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[p,Ri+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[m,Ht,Nn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[m,Ht,Nn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,m],[/\(bb(10);/i],[m,[p,te]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[p,tt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[m,[p,Se+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],m],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,m],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,m]]},j=function(x,_){if(typeof x===d&&(_=x,x=e),!(this instanceof j))return new j(x,_).getResult();var I=x||(typeof t!==s&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:r),F=_?Di(Pn,_):Pn;return this.getBrowser=function(){var A={};return A[p]=e,A[m]=e,He.call(A,I,F.browser),A.major=Bi(A.version),A},this.getCPU=function(){var A={};return A[h]=e,He.call(A,I,F.cpu),A},this.getDevice=function(){var A={};return A[c]=e,A[a]=e,A[l]=e,He.call(A,I,F.device),A},this.getEngine=function(){var A={};return A[p]=e,A[m]=e,He.call(A,I,F.engine),A},this.getOS=function(){var A={};return A[p]=e,A[m]=e,He.call(A,I,F.os),A},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return I},this.setUA=function(A){return I=typeof A===u&&A.length>P?Kt(A,P):A,this},this.setUA(I),this};j.VERSION=n,j.BROWSER=it([p,m,g]),j.CPU=it([h]),j.DEVICE=it([a,c,l,b,y,E,v,U,C]),j.ENGINE=j.OS=it([p,m]),typeof et!==s?(typeof Bt!==s&&Bt.exports&&(et=Bt.exports=j),et.UAParser=j):i==="object"&&null.amd?null(function(){return j}):typeof t!==s&&(t.UAParser=j);var Oe=typeof t!==s&&(t.jQuery||t.Zepto);if(Oe&&!Oe.ua){var st=new j;Oe.ua=st.getResult(),Oe.ua.get=function(){return st.getUA()},Oe.ua.set=function(x){st.setUA(x);var _=st.getResult();for(var I in _)Oe.ua[I]=_[I]}}})(typeof window=="object"?window:et)});f();f();(function(){try{var t=typeof window<"u"||typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="3fc96904-5413-41fc-865f-dbe7b3eecd50",t._sentryDebugIdIdentifier="sentry-dbid-3fc96904-5413-41fc-865f-dbe7b3eecd50")}catch(n){}})();f();var Pi=R(K()),Mi=R(Rn());f();var It=R(K());f();var S=R(K());f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,n=e&&e._configuration&&e._configuration.nonce;if(n)t.setAttribute("nonce",n);else{let r=document.querySelector("[nonce]");if(r){let o=r.nonce||r.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`#engagement-wrapper *,
#engagement-wrapper *:before,
#engagement-wrapper *:after,
.engagement-card-portal-container *,
.engagement-card-portal-container *:before,
.engagement-card-portal-container *:after,
.engagement-nudge-modal *,
.engagement-nudge-modal *:before,
.engagement-nudge-modal *:after,
.engagement-nudge-modal-mock *,
.engagement-nudge-modal-mock *:before,
.engagement-nudge-modal-mock *:after {
  box-sizing: border-box;
}

.engagement-modal > .rc-dialog > .rc-dialog-content {
  background-color: transparent;
}

.rc-dialog.amplitude-engagement-modal-body {
  margin-top: 0;
  margin-bottom: 0;
}

.engagement-tooltip {
  z-index: 2147483647 !important; /*make the tooltip the highest possible z index*/
}

/*** Hack: Hide this because it's less flexible (classnames can't be changes)
    Instead we only show its children, by translating its children ***/
.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-header {
  max-height: 0px !important;
  padding: 0px !important;
}

.engagement-modal > .rc-dialog {
  left: 0px;
  transition: left 0.3s;
}

.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-body {
  position: relative !important;
}

/* TestMode inline engagement */
.engagement-modal-inline.rc-dialog-wrap {
  position: relative;
  height: 100%;
}

#engagement-toast-container {
  inset: 16px;
  @media (max-width: 400px) {
    inset: 8px;
  }
}

#engagement-toast-responsive-inner-div {
  @media (max-width: 400px) {
    width: 100%;
  }
}


#engagement-container > div {
  height: 100%;
}

#engagement-home > .rc-dialog-root {
  height: 100%;
}

#engagement-wrapper .rc-header-guidance {
  background: rgba(174, 177, 221, 1) !important;
  filter: brightness(135%);
  border-radius: 2px 2px 0px 0px !important;
  border-bottom: 0px !important;
  padding: 8px 30px 2px 30px !important;
  margin: 0px 10px 0px 10px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 10px !important;
  font-weight: 400;
  text-align: center;
}

@keyframes fontbulger {
  0% {
    font-size: 10px;
  }
  30% {
    font-size: 15px;
  }
  100% {
    font-size: 12px;
  }
}

@keyframes shimmer {
  0% {
    background-position: top left;
  }
  100% {
    background-position: top right;
  }
}

.engagement-category-collapse {
  transform: scale(1, -1);
  transition: 0.3s ease-in;
  cursor: pointer;
}

.engagement-category-expand {
  transition: 0.3s ease-in;
  cursor: pointer;
}

/* Nudges - modal */

.engagement-nudge-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2147483644 !important;
}

.engagement-nudge-modal-mock {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 0;
  transition: margin-right cubic-bezier(0.78, 0.14, 0.15, 0.86) 0.3s;
  z-index: 2147483644 !important;
}

/* Nudges - media */

.engagement-help-doc-title::before {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, transparent 66.67%, gray 93.08%);
  content: '';
}

/* Recorder */
#engagement-recorder-mask {
  background: transparent;
}
`)),document.head.appendChild(t)}f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,n=e&&e._configuration&&e._configuration.nonce;if(n)t.setAttribute("nonce",n);else{let r=document.querySelector("[nonce]");if(r){let o=r.nonce||r.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`/*** Guidance banner styling and animation ***/
@keyframes example {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-30px);
  }
}

.rc-header-guidance {
  animation: example 0.5s;
  animation-fill-mode: forwards;
}

/*** engagement entry animation ***/
/*** We can't do exit animation because rc-dialog makes display: none ***/
@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-opened {
  animation: onEntry 0.1s;
  animation-fill-mode: forwards;
}

@keyframes onSelect {
  0% {
    transform: translate3d(0px, 0px, 0px);
  }
  50% {
    transform: translate3d(0px, 0px, -0.5px);
  }
  100% {
    transform: translate3d(0px, 0px, 0px);
  }
}

.engagement-selected {
  animation: onSelect 0.4s;
}

@keyframes ScaleEntry {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.engagement-scale-entry-animation {
  animation: ScaleEntry 0.3s;
  animation-fill-mode: forwards;
}

@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-shortcut-tooltip {
  opacity: 0;
  animation: tagEntry 0.2s;
  animation-delay: 0.5s;
  animation-fill-mode: forwards;
}

@keyframes tagExit {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.8);
    opacity: 0;
  }
}

.engagement-shortcut-tooltip-remove {
  animation: tagExit 0.2s;
  animation-fill-mode: forwards;
}

.engagement-shortcut-tooltip,
.engagement-shortcut-tooltip-remove {
  z-index: 99999999;
  position: absolute;
  padding: 8px 12px;
  background-color: rgba(0, 0, 0, 0.8);
  font-family: proxima-nova, sans-serif;
  color: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  font-size: 13px;
}

.engagement-shortcut-tooltip-tag {
  margin-left: 10px;
  padding: 2px 5px;
  border-radius: 2px;
  background-color: grey;
}

#engagement-launcher {
  animation: 0.25s ease-out scaleIn;
}

@keyframes scaleIn {
  0% {
    transform: scale(0.06);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes growFromBottom {
  0% {
    transform: scale(1, 0.3);
  }

  100% {
    transform: scale(1, 1);
  }
}
`)),document.head.appendChild(t)}f();var dn=class{constructor(){z(this,"organization")}getOrganization(){return this.organization}setOrganization(e){this.organization=e}},io=new dn;f();var Ki=function(e,n,r){for(var o=0,i=0;o=i,i=ct(),o===38&&i===12&&(n[r]=1),!Vt(i);)Yt();return Vn(e,qt)},Hi=function(e,n){var r=-1,o=44;do switch(Vt(o)){case 0:o===38&&ct()===12&&(n[r]=1),e[r]+=Ki(qt-1,n,r);break;case 2:e[r]+=Xn(o);break;case 4:if(o===44){e[++r]=ct()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Wn(o)}while(o=Yt());return e},Wi=function(e,n){return Zn(Hi(jn(e),n))},so=new WeakMap,Gi=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,o=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!so.get(r))&&!o){so.set(e,!0);for(var i=[],s=Wi(n,i),d=r.props,u=0,g=0;u<s.length;u++)for(var a=0;a<d.length;a++,g++)e.props[g]=i[u]?s[u].replace(/&\f/g,d[a]):d[a]+" "+s[u]}}},qi=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ao(t,e){switch(Gn(t,e)){case 5103:return T+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return T+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return T+t+Ge+t+q+t+t;case 6828:case 4268:return T+t+q+t+t;case 6165:return T+t+q+"flex-"+t+t;case 5187:return T+t+O(t,/(\w+).+(:[^]+)/,T+"box-$1$2"+q+"flex-$1$2")+t;case 5443:return T+t+q+"flex-item-"+O(t,/flex-|-self/,"")+t;case 4675:return T+t+q+"flex-line-pack"+O(t,/align-content|flex-|-self/,"")+t;case 5548:return T+t+q+O(t,"shrink","negative")+t;case 5292:return T+t+q+O(t,"basis","preferred-size")+t;case 6060:return T+"box-"+O(t,"-grow","")+T+t+q+O(t,"grow","positive")+t;case 4554:return T+O(t,/([^-])(transform)/g,"$1"+T+"$2")+t;case 6187:return O(O(O(t,/(zoom-|grab)/,T+"$1"),/(image-set)/,T+"$1"),t,"")+t;case 5495:case 3959:return O(t,/(image-set\([^]*)/,T+"$1$`$1");case 4968:return O(O(t,/(.+:)(flex-)?(.*)/,T+"box-pack:$3"+q+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+T+t+t;case 4095:case 3583:case 4068:case 2532:return O(t,/(.+)-inline(.+)/,T+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gt(t)-1-e>6)switch(fe(t,e+1)){case 109:if(fe(t,e+4)!==45)break;case 102:return O(t,/(.+:)(.+)-([^]+)/,"$1"+T+"$2-$3$1"+Ge+(fe(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Wt(t,"stretch")?ao(O(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(fe(t,e+1)!==115)break;case 6444:switch(fe(t,Gt(t)-3-(~Wt(t,"!important")&&10))){case 107:return O(t,":",":"+T)+t;case 101:return O(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+T+(fe(t,14)===45?"inline-":"")+"box$3$1"+T+"$2$3$1"+q+"$2box$3")+t}break;case 5936:switch(fe(t,e+11)){case 114:return T+t+q+O(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return T+t+q+O(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return T+t+q+O(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return T+t+q+t+t}return t}var Yi=function(e,n,r,o){if(e.length>-1&&!e.return)switch(e.type){case Kn:e.return=ao(e.value,e.length);break;case Hn:return qe([De(e,{value:O(e.value,"@","@"+T)})],o);case zn:if(e.length)return Yn(e.props,function(i){switch(qn(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qe([De(e,{props:[O(i,/:(read-\w+)/,":"+Ge+"$1")]})],o);case"::placeholder":return qe([De(e,{props:[O(i,/:(plac\w+)/,":"+T+"input-$1")]}),De(e,{props:[O(i,/:(plac\w+)/,":"+Ge+"$1")]}),De(e,{props:[O(i,/:(plac\w+)/,q+"input-$1")]})],o)}return""})}},Vi=[Yi],co=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(h){var b=h.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(h),h.setAttribute("data-s",""))})}var o=e.stylisPlugins||Vi,i={},s,d=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(h){for(var b=h.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;d.push(h)});var u,g=[Gi,qi];{var a,p=[Qn,tr(function(h){a.insert(h)})],l=er(g.concat(o,p)),c=function(b){return qe(Jn(b),l)};u=function(b,y,v,E){a=v,c(b?b+"{"+y.styles+"}":y.styles),E&&(m.inserted[y.name]=!0)}}var m={key:n,sheet:new Fn({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:u};return m.sheet.hydrate(d),m};f();var ze=R(K()),ji=(t=document.body)=>{var o,i;let e=(0,ze.useRef)(null),n=(0,ze.useRef)(null),r=(0,ze.useRef)(null);return(0,ze.useEffect)(()=>()=>{var s,d;(s=n.current)==null||s.disconnect(),(d=e.current)==null||d.remove()},[]),(e.current===null||t!==r.current)&&((o=n.current)==null||o.disconnect(),(i=e.current)==null||i.remove(),r.current=t,e.current=document.createElement("div"),e.current.setAttribute("data-engagement-toplevel-styles",""),e.current.setAttribute("hidden",""),t.prepend(e.current),n.current=new MutationObserver(()=>{e.current&&e.current.querySelectorAll("style[data-emotion]:not([data-s])").forEach(s=>{s.setAttribute("data-s","")})}),n.current.observe(e.current,{childList:!0,subtree:!0})),e.current},lo=ji;f();var Ze=R(K());var Zi=({nudgeActor:t})=>{var g;let e=D(),n=ft(t,({context:a})=>a.nudge),r=ft(t,({context:a})=>a.stepIndex),{animStyles:o}=ae(),i=se(n,r);if(!i||!(pt(i)&&i.formFactor.isShowingMask))return null;let{targetElement:s}=Fr(e,{step:i}),d=(g=s==null?void 0:s.getBoundingClientRect())!=null?g:new DOMRect,u=s?getComputedStyle(s).borderRadius:"0px";return d.width===0||d.height===0?null:Ze.default.createElement("div",{style:{position:"absolute",top:"0",left:"0",...ne.getZIndexStyles(i,"mask")}},Ze.default.createElement("div",{"data-testid":"engagement-nudge-mask",style:{width:`${document.documentElement.scrollWidth}px`,height:`${document.documentElement.scrollHeight}px`,clipPath:`polygon(0% 0%, 0% 100%,
                ${d.left+window.scrollX}px 100%,
                ${d.left+window.scrollX}px ${d.top+window.scrollY}px,
                ${d.left+window.scrollX+d.width}px ${d.top+window.scrollY}px,
                ${d.left+window.scrollX+d.width}px ${d.top+window.scrollY+d.height}px,
                0% ${d.top+window.scrollY+d.height}px,
                0% 100%, 100% 100%, 100% 0%)`,position:"absolute"}}),Ze.default.createElement("div",{"data-testid":"engagement-nudge-mask-inner",style:{pointerEvents:"none",position:"absolute",inset:`${d.top+window.scrollY}px ${d.left+window.scrollX}px`,width:`${d.width}px`,height:`${d.height}px`,padding:"4px",borderRadius:`${u}`,boxShadow:`0 0 0 ${Math.max(document.documentElement.scrollHeight,document.documentElement.scrollWidth)}px var(--background-overlay)`,overflow:"hidden",opacity:o.opacity,transitionProperty:"opacity",transitionDuration:o.transitionDuration,transitionTimingFunction:o.transitionTimingFunction}}))},po=({nudgesManager:t})=>{let e=D(),n=ft(t,o=>o.context.activeNudge);if(!n)return null;let r=J(e,n==null?void 0:n.variantId);return r?Ze.default.createElement(Zi,{nudgeActor:r}):null};f();var mo=t=>{if(t.themeOverride&&t.themeOverride.theme&&t.themeOverride.mode)return{themes:{"guides-surveys":t.themeOverride.theme,assistant:t.themeOverride.theme},mode:t.themeOverride.mode};let e=t.themeMode==="auto"?t.services.getDefaultUIMode():t.themeMode;return{themes:{"guides-surveys":jt(t.themes,"guides-surveys"),assistant:jt(t.themes,"assistant")},mode:e}};f();var ce=R(K());f();var Ct=R(K()),Xi=()=>{let t=()=>({width:window.innerWidth,height:window.innerHeight}),[e,n]=Ct.useState(t);return Ct.useEffect(()=>{let r=()=>{n(t())};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e},go=Xi;f();var Ne=R(K());f();var un=R(K());f();var fo=Ee({display:"flex",flexDirection:"column",alignItems:"flex-start",background:"var(--background-primary)",pointerEvents:"all",a:{color:"var(--content-link)",textDecoration:"none","&:hover":{color:"var(--content-link-hover)",textDecoration:"underline"}}}),Ji=Ee([fo,{width:"var(--modal-width) !important",borderRadius:"var(--layout-radius-card)",border:"1px solid var(--border-primary)",boxShadow:"var(--layout-shadow) var(--layout-shadow-color)",minHeight:"44px",'& > [tabindex="0"]':{width:"100%"}}]),Qi=Ee([fo,{width:"100% !important",height:"100% !important",margin:"0 !important",padding:"0 !important",justifyContent:"space-between !important",border:"none !important",boxShadow:"none !important",'& > [tabindex="0"]':{width:"100%",height:"100%"}}]),es=Ee({width:"unset !important"}),ts=V(zr)`
  z-index: ${ne.Z_NUDGE};
`,ns=({survey:t,organization:e,isCarousel:n,...r})=>k(ts,{css:[n?Qi:Ji,t&&es,r.style].filter(Boolean),...r}),ho=ns;f();var ln=t=>{switch(t||"center"){case"top-left":return{top:"16px",left:"16px",bottom:"auto",right:"auto",transform:"none"};case"top-center":return{top:"16px",left:"50%",bottom:"auto",right:"auto",transform:"translateX(-50%)"};case"top-right":return{top:"16px",right:"16px",bottom:"auto",left:"auto",transform:"none"};case"bottom-left":return{bottom:"16px",left:"16px",top:"auto",right:"auto",transform:"none"};case"bottom-center":return{bottom:"16px",left:"50%",top:"auto",right:"auto",transform:"translateX(-50%)"};case"bottom-right":return{bottom:"16px",right:"16px",top:"auto",left:"auto",transform:"none"};case"left-center":return{left:"16px",top:"50%",bottom:"auto",right:"auto",transform:"translateY(-50%)"};case"right-center":return{right:"16px",top:"50%",bottom:"auto",left:"auto",transform:"translateY(-50%)"};case"center":default:return{}}};var yo=({nudge:t,step:e,renderMode:n,handleLinkClick:r,stepIndex:o,actor:i})=>{var y,v;let s=D(),d=he(),{animStyles:u,onExit:g,isAnimatedWidget:a}=ae(),{isMobileDevice:p,isStudioMobilePreview:l,studioMobilePreviewWrapper:c,mobileStyles:m}=Le(),h=((y=e.formFactor)==null?void 0:y.canClickOutsideToClose)&&!s.isEditorPreview,b=((v=e.formFactor)==null?void 0:v.position)||"center";return un.default.createElement(ho,{organization:s.organization,survey:!!(e!=null&&e.content.find(E=>E.type==="survey_rating")),isCarousel:t.isCarousel,"data-testid":`engagement-modal-${t.variantId}-${String(e==null?void 0:e.id)}${n===1?"-mock":""}`,"aria-modal":"true","aria-live":"polite",onClose:E=>{lt(t)&&(E.type==="keydown"||E.type==="click"&&h)&&g()},classNames:{wrapper:`amplitude-engagement-modal-container engagement-nudge-modal${n===1?"-mock":""} ${d.generatedCSSClassname}`,mask:d.generatedCSSClassname},className:"amplitude-engagement-modal-body",styles:{wrapper:l?{...m.nudges.modal.wrap,...(t.isCarousel||b==="center")&&{width:"100%",height:"100%"},...!t.isCarousel&&b!=="center"&&ln(b)}:{pointerEvents:"all",...t.isCarousel&&{margin:0,padding:0,width:"100%",height:"100%"},...!t.isCarousel&&b!=="center"&&ln(b),...s.isEditorPreview&&{marginTop:Mr}},mask:{...l?m.nudges.modal.mask:{zIndex:ne.Z_EDITOR-2},...a&&{opacity:u.opacity,transitionProperty:"opacity",transitionDuration:u.transitionDuration,transitionTimingFunction:u.transitionTimingFunction},backgroundColor:"var(--background-overlay)"}},maskProps:{"data-amplitude-engagement-modal-overlay":!0},getContainer:l&&c?()=>c:()=>document.getElementById("engagement-wrapper")||document.body,modalRender:()=>un.default.createElement(Fe,{nudge:t,step:e,renderMode:n,handleLinkClick:r,stepIndex:o,actor:i}),style:{width:e.formFactor.layout==="horizontal"&&!p?"auto !important":void 0,maxWidth:e.formFactor.layout==="horizontal"&&!p?"100%":void 0,...t.isCarousel&&{width:"100% !important",height:"100% !important"},...u},visible:!0,keyboard:!s.isEditorPreview})};var rs=({nudge:t,stepIndex:e,renderMode:n})=>{let{onExit:r}=ae(),o=D(),i=se(t,e),s=$e(J),d=$e(Q),u=(p,l)=>{r(()=>d(p,l))},g=n!==1?s(t.variantId):void 0,a=vt(p=>xe.nudge.engaged(t,e,{...g==null?void 0:g.getSnapshot().context,source:{type:"link",url:p},interactionState:oe(o,t.variantId)}),()=>u(t,n));return Ne.default.createElement(wt,{actor:g,step:i},Ne.default.createElement(bt,null,Ne.default.createElement(yo,{nudge:t,step:i,renderMode:n,handleLinkClick:a,actor:g,stepIndex:e})))},os=t=>{let e=$e(Q);return Ne.default.createElement(re,{nudge:t.nudge},Ne.default.createElement(yt,{key:`modal-${t.nudge.variantId}-${t.stepIndex}`,widget:"modal",enterDelay:1,isMounted:!0,defaultExitAction:()=>{t.renderMode!==1&&e(t.nudge,t.renderMode)}},Ne.default.createElement(rs,{...t})))},bo=os;f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,n=e&&e._configuration&&e._configuration.nonce;if(n)t.setAttribute("nonce",n);else{let r=document.querySelector("[nonce]");if(r){let o=r.nonce||r.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`.rc-dialog {
  position: relative;
  width: auto;
  margin: 10px;
}
.rc-dialog-wrap {
  position: fixed;
  overflow: auto;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1050;
  -webkit-overflow-scrolling: touch;
  outline: 0;
}
.rc-dialog-title {
  margin: 0;
  font-size: 14px;
  line-height: 21px;
  font-weight: bold;
}
.rc-dialog-content {
  position: relative;
  background-color: #ffffff;
  border: none;
  border-radius: 6px 6px;
  background-clip: padding-box;
}
.rc-dialog-close {
  cursor: pointer;
  border: 0;
  background: transparent;
  font-size: 21px;
  position: absolute;
  right: 20px;
  top: 12px;
  font-weight: 700;
  line-height: 1;
  color: #000;
  text-shadow: 0 1px 0 #fff;
  filter: alpha(opacity=20);
  opacity: 0.2;
  text-decoration: none;
}
.rc-dialog-close:disabled {
  pointer-events: none;
}
.rc-dialog-close-x:after {
  content: '\xD7';
}
.rc-dialog-close:hover {
  opacity: 1;
  filter: alpha(opacity=100);
  text-decoration: none;
}
.rc-dialog-header {
  padding: 13px 20px 14px 20px;
  border-radius: 5px 5px 0 0;
  background: #fff;
  color: #666;
  border-bottom: 1px solid #e9e9e9;
}
.rc-dialog-body {
  padding: 20px;
}
.rc-dialog-footer {
  border-top: 1px solid #e9e9e9;
  padding: 10px 20px;
  text-align: right;
  border-radius: 0 0 5px 5px;
}
.rc-dialog-zoom-enter,
.rc-dialog-zoom-appear {
  opacity: 0;
  animation-duration: 0.3s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.08, 0.82, 0.17, 1);
  animation-play-state: paused;
}
.rc-dialog-zoom-leave {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.6, 0.04, 0.98, 0.34);
  animation-play-state: paused;
}
.rc-dialog-zoom-enter.rc-dialog-zoom-enter-active,
.rc-dialog-zoom-appear.rc-dialog-zoom-appear-active {
  animation-name: rcDialogZoomIn;
  animation-play-state: running;
}
.rc-dialog-zoom-leave.rc-dialog-zoom-leave-active {
  animation-name: rcDialogZoomOut;
  animation-play-state: running;
}
@keyframes rcDialogZoomIn {
  0% {
    opacity: 0;
    transform: scale(0, 0);
  }
  100% {
    opacity: 1;
    transform: scale(1, 1);
  }
}
@keyframes rcDialogZoomOut {
  0% {
    transform: scale(1, 1);
  }
  100% {
    opacity: 0;
    transform: scale(0, 0);
  }
}
@media (min-width: 768px) {
  .rc-dialog {
    width: 600px;
    margin: 30px auto;
  }
}
.rc-dialog-mask {
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  background-color: #373737;
  background-color: rgba(55, 55, 55, 0.6);
  height: 100%;
  filter: alpha(opacity=50);
  z-index: 1050;
}
.rc-dialog-mask-hidden {
  display: none;
}
.rc-dialog-fade-enter,
.rc-dialog-fade-appear {
  opacity: 0;
  animation-duration: 0.3s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);
  animation-play-state: paused;
}
.rc-dialog-fade-leave {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);
  animation-play-state: paused;
}
.rc-dialog-fade-enter.rc-dialog-fade-enter-active,
.rc-dialog-fade-appear.rc-dialog-fade-appear-active {
  animation-name: rcDialogFadeIn;
  animation-play-state: running;
}
.rc-dialog-fade-leave.rc-dialog-fade-leave-active {
  animation-name: rcDialogFadeOut;
  animation-play-state: running;
}
@keyframes rcDialogFadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
@keyframes rcDialogFadeOut {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
`)),document.head.appendChild(t)}var is=Re(()=>import("./660adeaef834803cf359b38ba4fda763cc5dcd22-ToolBar-N4I7NTSO.js"),"DebugToolBar"),ss=Re(()=>import("./660adeaef834803cf359b38ba4fda763cc5dcd22-Recorder-YB72A6A4.js"),"RecorderToolBar"),as=650,cs=()=>{let{currentModalNudge:t,nudgeDebugToolBar:e,nudgeRecorderToolBar:n}=D(),r=go().width,o=e.visible&&r>as,i=n.visible;return ce.default.createElement("div",null,ce.default.createElement("div",{id:"engagement-nudges-rc-tooltip-container"}),t&&ce.default.createElement(bo,{nudge:t.nudge,stepIndex:t.stepIndex,renderMode:t.renderMode}),o&&ce.default.createElement(ce.default.Suspense,{fallback:null},ce.default.createElement(is,null)),i&&ce.default.createElement(ce.default.Suspense,{fallback:null},ce.default.createElement(ss,null)))},vo=cs;f();var me=R(K()),Et=R(K());var be={state:{},subscribers:[],subscribe:t=>(be.subscribers.push(t),()=>{be.subscribers=be.subscribers.filter(e=>e!==t)})},ds=(t,e)=>{switch(e.type){case"SHOW":return{...t,[e.id]:e.payload};case"HIDE":{let n={...t};return delete n[e.id],n}case"HIDE_ALL_MATCHING_PATTERN":if(e.idPattern){let n={...t};for(let r in n)r.match(e.idPattern)&&delete n[r];return n}return{};default:return t}},pn=t=>{let e=ds(be.state,t);be.state=e,be.subscribers.forEach(n=>n(e))},wo=(t,e)=>{pn({type:"SHOW",id:t,payload:e})},So=t=>{pn({type:"HIDE_ALL_MATCHING_PATTERN",idPattern:t})},mn=t=>{let e=document.querySelector(`[data-spacer-for="${t}"]`);e&&e.remove(),pn({type:"HIDE",id:t})},Co=({children:t})=>{let{isEditorPreview:e}=D(),[n,r]=(0,Et.useState)(be.state);return(0,Et.useEffect)(()=>be.subscribe(r),[]),me.default.createElement(me.default.Fragment,null,t,me.default.createElement("div",{id:"engagement-nudges-banner-sticky-container",style:{width:"100%",top:"0px",left:0,position:"fixed",pointerEvents:"none",height:"100%"}},Object.entries(n).filter(([,o])=>o.sticky).map(([o,i])=>me.default.createElement("div",{key:o,id:o},i.element))),me.default.createElement("div",{id:"engagement-nudges-banner-inline-container-top",style:{width:"100%",position:"absolute",top:"0",left:0,pointerEvents:"none"}},Object.entries(n).filter(([,o])=>!o.sticky&&o.position==="top").map(([o,i])=>me.default.createElement("div",{key:o,id:o},i.element))),me.default.createElement("div",{id:"engagement-nudges-banner-inline-container-bottom",style:{width:"100%",position:e?void 0:"relative",pointerEvents:"none"}},Object.entries(n).filter(([,o])=>!o.sticky&&o.position==="bottom").map(([o,i])=>me.default.createElement("div",{key:o,id:o},i.element))))};f();var Io=R(zi()),Pe=R(K());f();var G=R(K());var ls=V.div`
  height: ${sn}px;
  position: relative;
  z-index: 50;

  @media screen and (max-height: 820px) {
    transform: scale(0.9);
  }

  @media screen and (max-height: 720px) {
    transform: scale(0.8);
  }

  @media screen and (max-height: 620px) {
    transform: scale(0.7);
  }

  @media screen and (max-height: 560px) {
    transform: scale(0.6);
  }

  @media screen and (max-height: 500px) {
    transform: scale(0.5);
  }

  @media screen and (max-height: 420px) {
    transform: scale(0.4);
  }
`,us=V.div`
  width: ${Tr}px;
  height: ${sn}px;
  position: relative;
  border-radius: 56px;
  box-shadow: 0px 0px 0px 7.5px #7d7e7d;
  border: 8px solid #000;
  background: linear-gradient(165deg, white, #ebf0ff 45%, #ebf0ff 55%, white);
  outline: 6px solid #2c2c2b;
  padding-top: 60px;
  padding-bottom: 34px;
  overflow: hidden;

  @media screen and (max-width: 670px) {
    height: 790px;
    width: 400px;
  }

  @media screen and (max-width: 580px) {
    height: 720px;
    width: 360px;
  }

  @media screen and (max-width: 480px) {
    height: 650px;
    width: 320px;
  }

  @media screen and (max-width: 400px) {
    height: 580px;
    width: 280px;
  }

  #engagement-nudge-container {
    overflow: auto;
  }
`,ps=V.div`
  height: 100%;
  width: 100%;
  position: relative;
`,ms=V.div`
  position: absolute;
  width: 100%;
  height: 60px;
  top: 0px;
  display: flex;
  justify-content: center;
  padding-top: 12px;
`,gs=V.div`
  height: 37px;
  width: 126px;
  border-radius: 24px;
  background-color: #000000;
  transition: height 0.5s cubic-bezier(0.075, 0.82, 0.165, 1), width 0.5s cubic-bezier(0.075, 0.82, 0.165, 1);

  &:hover {
    height: 45px;
    width: 145px;
  }
`,fs=V.div`
  position: absolute;
  width: 100%;
  height: 34px;
  bottom: 0px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 8px;
`,hs=V.div`
  height: 5px;
  width: 154px;
  border-radius: 24px;
  background-color: #000000;
`,ys=V.div`
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0px;
  bottom: 0px;
`,Eo=V.div`
  position: absolute;
  top: 120px;
  display: flex;
  flex-direction: column;

  &.left {
    left: -12px;
  }

  &.right {
    right: -12px;
    top: 220px;
  }
`,xt=V.span`
  background-color: #1d1e1f;
  display: inline-block;
  width: 5px;
  min-height: 62px;
  border-radius: 2px;

  &.power {
    height: 102px;
  }

  &.volume-up {
    margin-top: 29px;
  }
  &.volume-down {
    margin-top: 16px;
  }

  &.lock {
    min-height: 32px;
  }
`,bs=()=>G.default.createElement(ys,null,G.default.createElement(Eo,{className:"left"},G.default.createElement(xt,{className:"lock"}),G.default.createElement(xt,{className:"volume-up"}),G.default.createElement(xt,{className:"volume-down"})),G.default.createElement(Eo,{className:"right"},G.default.createElement(xt,{className:"power"}))),vs=()=>G.default.createElement(ms,null,G.default.createElement(gs,null)),xo=({style:t,children:e})=>{let{isMobileDevice:n,isMobileNativePreview:r}=Le();return G.default.createElement(ls,{style:t,"data-testid":"mobile-preview-device"},G.default.createElement(bs,null),G.default.createElement(us,{isMobileWeb:n&&!r},G.default.createElement(vs,null),G.default.createElement(ps,{id:"engagement-mobile-preview-wrapper"},G.default.createElement("div",{id:"engagement-mobile-nudge-mock-pin"}),e),G.default.createElement(fs,null,G.default.createElement(hs,null))))};var ws=({children:t})=>{let e=Pe.default.useRef(null),{widgetTableauSelection:n,editorPreviewDevice:r,isAssistantPreview:o}=D(),{mode:i}=he(),s=Pe.default.useCallback(g=>{if(!g){e.current&&(e.current.dispose(),e.current=null);return}if(e.current=(0,Io.default)(g,{maxZoom:1,minZoom:1,initialZoom:1,zoomDoubleClickSpeed:1,smoothScroll:!1,filterKey:function(){return!0}}),e.current.on("pan",function(){document.body.style.cursor="grab",g.style.pointerEvents="none"}),e.current.on("panend",function(){document.body.style.cursor="auto",g.style.removeProperty("pointer-events")}),!!g.children[0])return g.addEventListener("mousedown",d),g.addEventListener("wheel",u),()=>{g.removeEventListener("mousedown",d),g.removeEventListener("wheel",u)}},[n]),d=g=>{var l,c;let a=g.target;(a==null?void 0:a.id)==="panzoom-container"?(l=e.current)==null||l.resume():(c=e.current)==null||c.pause()},u=g=>{var l,c;let a=g.target;(a==null?void 0:a.id)==="panzoom-container"?(l=e.current)==null||l.resume():(c=e.current)==null||c.pause()};return Pe.default.createElement("div",{style:{position:"absolute",inset:0,overflow:"clip",backgroundColor:o?"var(--monochrome-minus-4)":i==="lightMode"?"#F9F9F9":"#3F424A",backgroundImage:o?void 0:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABZSURBVHgB7dG7DYBADANQJxexAiXSTXw9uyExBih34SOxQhr83Li2ASIiIiIiIvo7QbLW1jms1zijq9puSDaGLxhhuBPaqyKZTFK+/q6AZOJlg8shqv5ccAGZWRnaKiSy9QAAAABJRU5ErkJggg==)"}},Pe.default.createElement("div",{id:"panzoom-container",style:{width:"100%",height:"100%"},ref:s},t,Pe.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},Pe.default.createElement(xo,{style:{visibility:r.startsWith("mobile")?"visible":"hidden"}}))))},Ao=ws;f();var To=R(K());var Me=class extends To.default.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){var r;(r=X())==null||r.withScope(o=>{var i;o.setContext("featureError",{featureName:this.props.featureName,componentStack:n.componentStack,errorName:e.name,errorMessage:e.message}),o.setTag("feature",this.props.featureName),(i=X())==null||i.captureException(e)})}render(){return this.state.hasError?null:this.props.children}};var Cs=Re(()=>import("./660adeaef834803cf359b38ba4fda763cc5dcd22-WidgetTableau-IJCTE2PM.js"),"WidgetTableau"),Es=Re(()=>import("./660adeaef834803cf359b38ba4fda763cc5dcd22-ResourceCenterRoot-WZPUHFDF.js"),"ResourceCenterRoot"),xs=()=>{let t=D(),{generatedCSSClassname:e}=he(),n=()=>S.default.createElement(Me,{featureName:"Nudges"},S.default.createElement(vo,null),t.nudgesManager&&S.default.createElement(po,{nudgesManager:t.nudgesManager}),S.default.createElement(Rr,null),S.default.createElement("div",{id:"engagement-tooltip-container-portal"}),S.default.createElement(Co,null)),r=()=>S.default.createElement(Me,{featureName:"Checklists"},S.default.createElement(Yr,null)),o=i=>{var s,d,u;return t.resourceCenter?S.default.createElement(Me,{featureName:"ResourceCenter"},S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Es,{isEnabled:!!t.resourceCenter.key&&!!((d=(s=t.decide)==null?void 0:s[t.resourceCenter.key])!=null&&d.value)&&(!!t.resourceCenter.chatEnabled||((u=t.resourceCenter.resourceCenterEnabled)!=null?u:!0)),isPreviewPane:i,isVisible:t.resourceCenter.visible,launcher:t.resourceCenter.desktopLauncher}))):null};return S.default.createElement("div",{className:e,id:"engagement-theme-root",dir:"ltr"},t.showWidgetTableau?S.default.createElement(Me,{featureName:"WidgetTableau"},S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Cs,null))):t.isEditorPreview?S.default.createElement(Ao,null,r(),n(),o(!0)):S.default.createElement(S.default.Fragment,null,r(),n(),o(!1)))},Is=({children:t})=>{var u,g,a,p,l;let e=D(),{organization:n}=e,r=(0,S.useRef)(!!e.user),o=document.getElementById("engagement-wrapper"),i=lo(o!=null?o:document.head),s=(0,S.useMemo)(()=>{var m,h,b;let c=Ce();return co({key:"engagement-toplevel",container:i,speedy:!((h=(m=c[N])==null?void 0:m.options)!=null&&h.renderCssInDom),nonce:(b=c[N])==null?void 0:b.nonce,stylisPlugins:[nr]})},[i]);(0,S.useEffect)(()=>{io.setOrganization(n)},[n]),S.default.useEffect(()=>{e.user&&(e.services.postMessageToDashboard("ENGAGEMENT_BOOTED"),r.current||(r.current=!0))},[(u=e.user)==null?void 0:u.device_id,(g=e.user)==null?void 0:g.user_id,n]),S.default.useEffect(()=>{let c=setTimeout(()=>{r.current||w.warn("\u{1F44B} Guides and Surveys are almost ready. You just need to call `boot()` to make them available in your app.")},15e3);return()=>clearTimeout(c)},[]);let d=(l=(a=e.user)==null?void 0:a.user_id)!=null?l:(p=e.user)==null?void 0:p.device_id;return S.default.createElement(S.default.Fragment,null,S.default.createElement(dt,{value:s},d?S.default.createElement(xs,{key:d}):null,t))},As=t=>{let e=D(),n=mo(e),r={container:document.getElementById("engagement-container"),root:document};return S.default.createElement(or.Provider,{value:r},S.default.createElement(Zt,{theme:n.themes["guides-surveys"],mode:n.mode},S.default.createElement(Zt,{theme:n.themes.assistant,mode:n.mode},S.default.createElement(Is,{...t}))))},ko=As;var _o=t=>It.default.createElement(Un,null,It.default.createElement($n,{store:t.store},It.default.createElement(ko,null,t.children)));f();f();var At=(t,e)=>{let n={};return Object.keys(e).forEach(r=>{n[r]=e[r].bind(null,t)}),n};var Fo=R(Fi());var gn={};$i(gn,{previewAutopilotKeywords:()=>Oo,previewContentItem:()=>Ro,previewRecSet:()=>Po,previewResourceCenter:()=>Mo,setCurrentChatSession:()=>Bo,setInitialPage:()=>Do,showResourceCenter:()=>No});f();f();var No=(t,e)=>{t.services.showResourceCenter(t,e)},Po=(t,e)=>{t.services.previewRecSet(t,e)},Mo=(t,e,n)=>{t.services.previewResourceCenter(t,e,n)},Oo=(t,e)=>{t.services.previewAutopilotKeywords(t,e)},Ro=(t,e)=>{t.services.setCurrentContentId(t,e)},Do=(t,e)=>{t.resourceCenter.initialPage=e},Bo=(t,e,n,r=!1)=>{t.resourceCenter.currentChatSession={sessionId:e,messages:n,isReviewMode:r}};f();var Ts=t=>{var e,n,r,o;return typeof window>"u"||typeof document>"u"?t:{...t,event_properties:{...t.event_properties,"[Guides-Surveys] Page":{domain:(e=window.location)==null?void 0:e.hostname,hash:(n=window.location)==null?void 0:n.hash,path:(r=window.location)==null?void 0:r.pathname,query:(o=window.location)==null?void 0:o.search,title:document.title}}}},ks=t=>({...t,event_properties:{...t.event_properties,"[Guides-Surveys] Version":"1"}}),_s=t=>(t=ks(t),t=Ts(t),t),Tt=class{constructor(e){z(this,"hasBooted",!1);z(this,"integrations");this.integrations=e}trackEvent(e,n={}){this.track(e,n)}track(e,n={}){var o,i;let r={event_type:e,event_properties:n};if(!this.hasBooted){w.warn("Events cannot be tracked before `boot` is called");return}try{let s=_s(r);w.debug("Tracking event",JSON.stringify(s,null,2));try{this.integrations().forEach(d=>{var u;(u=d.track)==null||u.call(d,{event_type:s.event_type,event_properties:s.event_properties})})}catch(d){(o=X())==null||o.captureException(d)}}catch(s){w.error("Unexpected error logging event; ignoring",{error:s}),(i=X())==null||i.captureException(s)}}setBootStatus(e){this.hasBooted=e}};f();var Ns=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Ps(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),Ps=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Ms=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t}(),ve=function(){return ve=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ve.apply(this,arguments)};function kt(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lo(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(d){s={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}var _t=function(t,e){var n,r,o=["string","number","boolean","undefined"],i=typeof t,s=typeof e;if(i!==s)return!1;try{for(var d=kt(o),u=d.next();!u.done;u=d.next()){var g=u.value;if(g===i)return t===e}}catch(b){n={error:b}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var a=Array.isArray(t),p=Array.isArray(e);if(a!==p)return!1;if(a&&p){for(var l=0;l<t.length;l++)if(!_t(t[l],e[l]))return!1}else{var c=Object.keys(t).sort(),m=Object.keys(e).sort();if(!_t(c,m))return!1;var h=!0;return Object.keys(t).forEach(function(b){_t(t[b],e[b])||(h=!1)}),h}return!0},Os="$set",Rs="$unset",Ds="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var Bs=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=ve({},this.identity.userProperties),r=ve(ve({},this.identity),{userProperties:n});return{setUserId:function(o){return r.userId=o,this},setDeviceId:function(o){return r.deviceId=o,this},setUserProperties:function(o){return r.userProperties=o,this},setOptOut:function(o){return r.optOut=o,this},updateUserProperties:function(o){var i,s,d,u,g,a,p=r.userProperties||{};try{for(var l=kt(Object.entries(o)),c=l.next();!c.done;c=l.next()){var m=Lo(c.value,2),h=m[0],b=m[1];switch(h){case Os:try{for(var y=(d=void 0,kt(Object.entries(b))),v=y.next();!v.done;v=y.next()){var E=Lo(v.value,2),U=E[0],C=E[1];p[U]=C}}catch(M){d={error:M}}finally{try{v&&!v.done&&(u=y.return)&&u.call(y)}finally{if(d)throw d.error}}break;case Rs:try{for(var P=(g=void 0,kt(Object.keys(b))),B=P.next();!B.done;B=P.next()){var U=B.value;delete p[U]}}catch(M){g={error:M}}finally{try{B&&!B.done&&(a=P.return)&&a.call(P)}finally{if(g)throw g.error}}break;case Ds:p={};break}}}catch(M){i={error:M}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return r.userProperties=p,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return ve({},this.identity)},t.prototype.setIdentity=function(e){var n=ve({},this.identity);this.identity=ve({},e),_t(n,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,Nt=function(){function t(){this.identityStore=new Bs,this.eventBridge=new Ms,this.applicationContextProvider=new Ns}return t.getInstance=function(e){return Xe.analyticsConnectorInstances||(Xe.analyticsConnectorInstances={}),Xe.analyticsConnectorInstances[e]||(Xe.analyticsConnectorInstances[e]=new t),Xe.analyticsConnectorInstances[e]},t}();f();var Pt=["boot"],Uo=["boot"],fn="$default_instance";function $o(t){var o,i,s,d,u,g,a,p,l;let e=typeof window<"u"?window.engagement:void 0,n={_q:(o=e==null?void 0:e._q)!=null?o:[],_configuration:{apiKey:(s=(i=e==null?void 0:e._configuration)==null?void 0:i.apiKey)!=null?s:"",serverUrl:(d=e==null?void 0:e._configuration)==null?void 0:d.serverUrl,chatUrl:(u=e==null?void 0:e._configuration)==null?void 0:u.chatUrl,mediaUrl:(g=e==null?void 0:e._configuration)==null?void 0:g.mediaUrl,serverZone:(p=(a=e==null?void 0:e._configuration)==null?void 0:a.serverZone)!=null?p:"US",options:{...(l=e==null?void 0:e._configuration)==null?void 0:l.options}},_sentry:void 0,init(c,m){var E,U,C;if(n._configuration.apiKey){console.log("Engagement SDK has already been initialized. Ignoring additional init call.");return}n._configuration={...n._configuration,...m,apiKey:c,options:{splitting:!0,...n._configuration.options,...m==null?void 0:m.options}},(U=(E=n._configuration)==null?void 0:E.options)!=null&&U.logger&&n._configuration.options.logger.enable((C=n._configuration.options.logLevel)!=null?C:2);let h;if(m!=null&&m.cdnUrl)n._configuration.options.splitting?h=`${m.cdnUrl}/engagement-browser/prod/split/index.js`:h=m.cdnUrl+"/engagement-browser/prod/index.min.js.gz";else{let P=n._configuration.serverZone==="EU"?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com";n._configuration.options.splitting?h=`${P}/engagement-browser/prod/split/index.js`:h=`${P}/engagement-browser/prod/index.min.js.gz`}let b=null,y=()=>{if(b&&(clearTimeout(b),b=null),n._q&&n._q.length>0)for(console.warn(`Engagement SDK failed to load within ${v}ms. Resolving pending calls gracefully.`);n._q.length>0;){let P=n._q.shift();if(!P)continue;let B=P[0],M=Pt.includes(B);if(console.warn(`Engagement SDK method '${B}' still in queue (isAsyncMethod=${M}); attempting to resolve as no-op.`),M&&P[1]instanceof Function&&P[2]instanceof Function){let Y=P[1];console.warn(`Engagement SDK method '${B}' resolved as no-op due to script loading failure`),Y(void 0)}}};t(h,n._configuration.options.splitting?"module":void 0,m==null?void 0:m.nonce,y);let v=1e4;b=setTimeout(()=>{y()},v)},plugin(c){let m=n.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(h,b){var U;let y=(U=h.instanceName)!=null?U:fn,v=Nt.getInstance(y).identityStore;m(h.apiKey,{serverZone:h.serverZone,...c,options:{logLevel:h.logLevel,logger:h.loggerProvider,...c==null?void 0:c.options}});let E=[{track:C=>{b.track(C)}}];await window.engagement.boot({user:()=>{let C=v.getIdentity();return{user_id:b.getUserId(),device_id:b.getDeviceId(),user_properties:C.userProperties,getSessionId:b.getSessionId}},integrations:E}),v.addIdentityListener(C=>{var P,B,M,Y;if(!((P=window.engagement)!=null&&P._.user)||!((B=window.engagement)!=null&&B._analytics.hasBooted)){console.warn("Engagement SDK not booted. Ignoring identity change.");return}((Y=(M=window.engagement)==null?void 0:M._.user)==null?void 0:Y.user_id)!==C.userId?(window.engagement.shutdown(),window.engagement.boot({user:()=>{let te=v.getIdentity();return{user_id:b.getUserId(),device_id:b.getDeviceId(),user_properties:te.userProperties,getSessionId:b.getSessionId}},integrations:E})):window.engagement._setUserProperties(C.userProperties)})},async execute(h){return window.engagement.forwardEvent(h),h}}}},r=n;return new Proxy(n,{get:function(c,m){if(m in r)return r[m];if(m!=="then")return m==="gs"||m==="rc"?new Proxy({},{get:function(h,b){return function(){let y=Array.from(arguments),v=`${m}.${b}`;y.unshift(v),n._q.push(y)}}}):Pt.includes(m)?function(){let h=Array.prototype.slice.call(arguments);return new Promise((b,y)=>{h.unshift(m,b,y),n._q.push(h)})}:function(){let h=Array.prototype.slice.call(arguments);h.unshift(m),n._q.push(h)}}})}var Ls=["_reloadOrganization","_reloadNudges","_reloadThemes"],Us={},Mt=class{constructor(e,n){z(this,"_");z(this,"nudgeActions");z(this,"resourceCenterActions");z(this,"globalActions");z(this,"_analytics",new Tt(()=>this._.integrations));z(this,"_configuration",{serverZone:"US",serverUrl:void 0,mediaUrl:void 0,apiKey:"",options:{...Us}});z(this,"_initStarted",!1);z(this,"_isProxy",!1);z(this,"_fingerprint");z(this,"_sentry");z(this,"_debouncedDecide");z(this,"_autoRefreshTimer",null);z(this,"transformForHeadless",e=>e.map(n=>{var o,i,s,d,u,g,a,p,l,c,m;let r=JSON.parse(JSON.stringify(n));return(o=r.lifecycleConfig)!=null&&o.conditions&&delete r.lifecycleConfig.conditions,(i=r.pageTargeting)!=null&&i.conditions&&delete r.pageTargeting.conditions,(s=r.temporarilyHideTargeting)!=null&&s.conditions&&delete r.temporarilyHideTargeting.conditions,(u=(d=r.lifeCycleState)==null?void 0:d.checks)!=null&&u.sessionProperties&&delete r.lifeCycleState.checks.sessionProperties,(c=(l=(p=(a=(g=r.lifeCycleState)==null?void 0:g.checks)==null?void 0:a.limits)==null?void 0:p.detail)==null?void 0:l.limits)!=null&&c.conditions&&delete r.lifeCycleState.checks.limits.detail.limits.conditions,((m=r.lifeCycleState)==null?void 0:m.willRenderIfTriggered)!==void 0&&(r.lifeCycleState.passesAllChecks=r.lifeCycleState.willRenderIfTriggered,delete r.lifeCycleState.willRenderIfTriggered),r}));z(this,"gs",{reset:(e,n)=>{let r=tn(this._,e);if(!r){w.warn(`gs.reset: Guide or survey with flagKey: ${e} not found`);return}this.nudgeActions.resetNudge(r==null?void 0:r.variantId,{step:n})},getAllGuidesAndSurveys:(e,n=[])=>{var i;let r=pe(this._);if(!r)return[];let o=[];for(let s of r.values()){let d=s.getSnapshot().context.nudge,u=oe(this._,d.variantId),g=s.getSnapshot().matches({Step:"Render Loop"}),a=!!(u!=null&&u.activelifeCycleUuid),p=Er(this._,d,n),l={activelifeCycleUuid:(u==null?void 0:u.activelifeCycleUuid)||"",currentStep:(u==null?void 0:u.currentStep)||0,isCompleted:(u==null?void 0:u.isCompleted)||!1,isDismissed:(u==null?void 0:u.isDismissed)||!1,isChecklistExpanded:(i=u==null?void 0:u.isChecklistExpanded)!=null?i:!0,steps:(u==null?void 0:u.steps)||{},shouldShow:g||a,checks:(p==null?void 0:p.checks)||{},willRenderIfTriggered:(p==null?void 0:p.willRenderIfTriggered)||!1};e!=null&&e.onlyEligible&&!l.willRenderIfTriggered||e!=null&&e.variantIds&&!e.variantIds.includes(d.variantId)||o.push({...d,lifeCycleState:l})}return this.transformForHeadless(o)},getPreviewGuideOrSurvey:async e=>{var i,s;let n=(i=Ce())==null?void 0:i[N],r=await wr(n==null?void 0:n.apiKey);r!=null&&r.nudges&&await((s=Ce())==null?void 0:s._reloadNudges(r));let o=this.gs.getAllGuidesAndSurveys({variantIds:[e]},["userTargeting"])[0];return o.lifeCycleState.checks.userTargeting={result:"PASS",explanation:"User targeting always passes in preview mode",detail:{userTargeting:o.flagKey}},o.lifeCycleState.willRenderIfTriggered=Object.values(o.lifeCycleState.checks).every(({result:d})=>d==="PASS"),o},list:()=>{let e=[],n=pe(this._);if(!n)return e;for(let r of n.values()){let o=r.getSnapshot().context.nudge,i=oe(this._,o.variantId),s=r.getSnapshot().matches({Step:"Render Loop"});!(i!=null&&i.activelifeCycleUuid)&&!s||e.push({id:o.variantId,step:i==null?void 0:i.currentStep,title:o.title,status:s?"visible":"active",key:o.flagKey})}return e},show:(e,n=0)=>{let r=tn(this._,e);r?(this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.forceTriggerSingleNudge(r,{source:{type:"sdk"},overrides:{stepIndex:n}})):w.error(`triggerNudge: Nudge with key: ${e} not found`)},closeAll:()=>{var e;(e=pe(this._))==null||e.forEach(n=>{n==null||n.send({type:"DISMISS"})})}});z(this,"rc",{open:()=>{this.resourceCenterActions.showResourceCenter(!0)},close:()=>{this.resourceCenterActions.showResourceCenter(!1)},toggle:()=>{this.resourceCenterActions.showResourceCenter(!this._.resourceCenter.visible)}});var r;this._=e,this.nudgeActions=At(e,gt),this.resourceCenterActions=At(e,gn),this.globalActions=At(e,yr),this._configuration={...this._configuration,...n,options:{...this._configuration.options,...n.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((r=this._configuration.options.logLevel)!=null?r:2),this._debouncedDecide=(0,Fo.default)(async()=>{await this.decide(),this.nudgeActions.sendConstantTriggers()},1e4)}init(e,n){var r;if(this._configuration.apiKey){w.warn("Engagement SDK has already been initialized. Ignoring additional init call.");return}this._configuration={...this._configuration,apiKey:e,...n,options:{...this._configuration.options,...n==null?void 0:n.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((r=this._configuration.options.logLevel)!=null?r:2)}plugin(e){return{name:"@amplitude/engagement-browser",type:"enrichment",setup:async(o,i)=>{var u;let s=(u=o.instanceName)!=null?u:fn,d=Nt.getInstance(s).identityStore;await this.boot({user:()=>{let g=d.getIdentity();return{user_id:i.getUserId(),device_id:i.getDeviceId(),user_properties:g.userProperties,getSessionId:i.getSessionId}},integrations:[{track:g=>{i.track(g)}}]}),d.addIdentityListener(g=>{this._setUserProperties(g.userProperties)})},execute:async o=>(this.forwardEvent(o),o)}}setRouter(e){this.globalActions.addCallbacks({"engagement-router":e})}async updateLanguage(e){var o;this._configuration&&(this._configuration.locale=e);let r=(await Ie(this._configuration.apiKey)).nudges;(o=pe(this._))==null||o.forEach(i=>{let s=r.find(d=>d.variantId===i.getSnapshot().context.nudge.variantId);s&&(i==null||i.send({type:"REFRESH_NUDGE",nudge:s}))})}async decide(){if(!this._.user){w.error("User must be set before calling decide");return}if(!this._configuration.apiKey){w.error("API key must be set before calling decide");return}return this._.decide=await br.decide(this._configuration.apiKey,this._.user,this._.isEditorPreview),this._.decide}shutdown(){this._analytics.setBootStatus(!1),this._clearAutoRefreshTimer(),this._.integrations=[],this._.decide=void 0,this._.user=void 0,this._.endUserStore.reset()}setAutoRefreshInterval(e){if(this._clearAutoRefreshTimer(),e&&e>=60){let n=e*1e3,r=()=>{this._autoRefreshTimer=setTimeout(async()=>{w.log("Auto-refreshing due to timeout"),await this.refresh(),r()},n)};r(),w.debug(`Auto-refresh interval set to ${e} seconds`)}else e!==void 0&&e<60&&w.warn("Auto-refresh interval must be greater or equal to 60 seconds - auto-refresh disabled")}_clearAutoRefreshTimer(){this._autoRefreshTimer&&(clearTimeout(this._autoRefreshTimer),this._autoRefreshTimer=null)}async refresh(){let e=this.gs.list().filter(n=>n.status==="visible");if(e.length>0){w.debug("Skipping refresh because guides or surveys are currently visible and we don't want to close them",{visibleNudges:e.map(n=>({id:n.id,key:n.key}))});return}await this.decide(),await this._.endUserStore.fetchData(),await this._reload(),this.nudgeActions.sendConstantTriggers()}async boot(e){var r,o,i,s,d;if(this._.user){w.warn("User already booted, ignoring additional boot call. Call shutdown first if you want to boot a different user.");return}let n;if(typeof e.user=="function")try{n=e.user()}catch(u){w.error("Failed to get user from provider function",u)}else typeof e=="string"?n={user_id:e}:typeof e.user=="string"?n={user_id:e.user}:n=e.user;if(n&&(n.user_id===""&&(n.user_id=void 0),n.device_id===""&&(n.device_id=void 0)),!n||!n.user_id&&!n.device_id){w.error("User must specify at least a user_id or device_id"),this._.user=void 0;return}n=this._.services.enrichUser(n),this._.hasBooted&&((r=pe(this._))==null||r.forEach(u=>{u==null||u.send({type:"CLOSE"})})),this._.user=n,e.integrations!=null&&(this._.integrations=[],(o=e.integrations)==null||o.forEach(u=>{this.addIntegration(u)}));try{await this.decide(),w.debug("Decide data fetched successfully")}catch(u){w.error("Failed to fetch decide data",u),(i=X())==null||i.captureException(u)}try{await this._.endUserStore.fetchData(),this._.endUserStore.initializedSuccessfully&&(this._analytics.setBootStatus(!0),this._.hasBooted=!0,e.autoRefreshIntervalSeconds!==void 0&&this.setAutoRefreshInterval(e.autoRefreshIntervalSeconds),(s=this._.nudgesManager)==null||s.send({type:"END_USER_STORE_LOADED"}),w.debug("End user state loaded successfully"))}catch(u){w.error("Failed to fetch end user state",u),(d=X())==null||d.captureException(u)}this.nudgeActions.sendConstantTriggers()}forwardEvent(e){typeof e=="string"&&(e={event_type:e}),w.debug(`Registering event ${e.event_type}`),hr(this._,e.event_type,e.event_properties)}addIntegration(e){this._.integrations.push(e)}setThemeMode(e){["lightMode","darkMode","auto"].includes(e)&&(this._.themeMode=e)}addCallback(e,n){this.globalActions.addCallbacks({[e]:n})}setSessionProperty(e,n){if(!ir(e)){console.error("Invalid session property key",e);return}if(!sr(n)){console.error("Invalid session property value",n);return}this.globalActions.setSessionProperties({[e]:n})}registerAction(e,n){var o,i;let r=en(this._,e);if(!r){w.warn(`registerAction: Guide or survey with variantId: ${e} not found`);return}if(n.type==="show")this.nudgeActions.forceTriggerSingleNudge(r,{source:{type:"sdk"}});else if(n.type==="dismiss")Q(this._,r,0);else if(n.type==="snooze")Cr(this._,r,r.snoozeDuration,0);else if(n.type==="ctaClick"){let s=J(this._,e),d=oe(this._,e),u=(d==null?void 0:d.currentStep)||0,g=r.steps[u];if(!g){w.error(`registerAction: Step ${u} not found for nudge ${e}`);return}let a=g.content.find(b=>{var y;return b.type==="button"&&((y=b.meta)==null?void 0:y.buttonType)===n.buttonType});if(!a){w.error(`registerAction: No button with type ${n.buttonType} found in step ${u}`);return}n.surveyResponses&&(s==null||s.send({type:"UPDATE_SURVEY_RESPONSE",surveyResponse:n.surveyResponses}));let p=s==null?void 0:s.getSnapshot(),l=(i=(o=p==null?void 0:p.context)==null?void 0:o.surveyResponses)==null?void 0:i[g.id],c=l!=null?l:n.surveyResponses,m=a.meta,h=cr(this._,g,{buttonMeta:m,surveyResponses:c});xr(this._,h,m,0,s)}else w.error(`registerAction: Invalid action type "${n.type}". Must be "show", "dismiss", "snooze", or "ctaClick"`)}async _configUser(){var d;(d=X())==null||d.addBreadcrumb({level:"debug",category:"internal",message:"_configUser called"});let{organization:e,nudges:n,flags:r,themes:o,resourceCenters:i}=await Ie(this._configuration.apiKey,this._.isEditorPreview);this._.flags=r,this._.themes=o;let[s]=i;s&&(this._.resourceCenter={...this._.resourceCenter,...s}),this.globalActions.setOrganization(e),this.nudgeActions.initNudges(n||[]),this.nudgeActions.setupTimedTriggers([...n])}_updateEditorPreviewDevice(e){this._.editorPreviewDevice=e}_getEditorPreviewDevice(){return this._.editorPreviewDevice}async _reload(e=Ls){let n=await Ie(this._configuration.apiKey,this._.isEditorPreview);for(let r of e){let i=this[r];i instanceof Function&&i.call(this,n)}}async _reloadOrganization(e){let{organization:n}=e||await Ie(this._configuration.apiKey,this._.isEditorPreview);this.globalActions.setOrganization(n)}async _reloadNudges(e){let{nudges:n}=e||await Ie(this._configuration.apiKey,this._.isEditorPreview);this.nudgeActions.initNudges(n||[])}async _reloadThemes(e){let{themes:n}=e||await Ie(this._configuration.apiKey,this._.isEditorPreview);this._.themes=n}_startNudgeDebug(e){let{nudge:n}=e;this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.startDebugSession(n,{refreshDecide:!0,toStepIndex:0})}async _stopNudgeDebug(){this.nudgeActions.stopDebugSession()}_showNudgeStepMock(e){var n;(n=pe(this._))==null||n.forEach(r=>{r==null||r.send({type:"CLOSE"})}),this.nudgeActions.showStepMock(e.nudge,e.stepIndex,{forceOpen:e.forceOpen})}_closeNudgeMocks(){this.nudgeActions.closeAllNudgeMocks()}_setUserProperties(e){if(!this._.user){w.error("User is undefined, likely hasn't been booted yet");return}this._.user.user_properties={...this._.user.user_properties,...e},this._debouncedDecide()}_shareConfig(){return{organization:this._.organization||void 0,nudges:Be(this._)}}_shareTrackedEvents(){return{trackedEvents:[...this._.trackedAppEvents]}}_startDebug(){ue.set("debug:nudges","true"),w.log("Enabled debugging for nudges. Restart the application.")}_stopDebug(){ue.remove("debug:nudges"),w.log("Disabled debugging for nudges. Restart the application.")}_showResourceCenter(e,n){this.resourceCenterActions.showResourceCenter(e),(n==null?void 0:n.recSet)!==void 0&&this.resourceCenterActions.previewRecSet(n.recSet),n!=null&&n.resourceCenter&&(n==null?void 0:n.quickLinks)!==void 0&&this.resourceCenterActions.previewResourceCenter(n.resourceCenter,n.quickLinks),(n==null?void 0:n.autopilotKeywords)!==void 0&&this.resourceCenterActions.previewAutopilotKeywords(n.autopilotKeywords),(n==null?void 0:n.contentItemId)!==void 0&&this.resourceCenterActions.previewContentItem(n.contentItemId)}_startChat(e,n){e&&e!=="behavior-settings"&&n&&n.length>0&&this.resourceCenterActions.setCurrentChatSession(e,n,!0),this.resourceCenterActions.setInitialPage({item:{page:"assistant",params:{}}}),this.resourceCenterActions.showResourceCenter(!0)}_shareCurrentChatSession(){return this._.resourceCenter.currentChatSession}async _getDebugSnapshot(e){if(e!=null&&e.variantId){if(typeof e.variantId=="number"){let o=en(this._,e.variantId);if(o){let i=typeof e.stepIndex=="number"?e.stepIndex:0,s=await on(this._,o,i),{name:d}=Jt(o),u=`${d} debug snapshot: ${s.guideOrSurvey.title} - ${s.guideOrSurvey.variant}`;return console.log(u,s),s}}return}let n=Be(this._),r=[];for(let o of n){let i=await on(this._,o),{name:s}=Jt(o),d=`${s} debug snapshot: ${i.guideOrSurvey.title} - ${i.guideOrSurvey.variant}`;console.log(d,i),r.push(i)}return r}_debugStatus(){console.log({user:this._.user,apiKey:this._configuration.apiKey,stateInitialized:this._.endUserStore.initializedSuccessfully,decideSuccessful:this._.decide!=null,num_guides_surveys:Be(this._).length,analyticsIntegrations:this._.integrations.length})}_setTheme(e,n){e||(this._.themeOverride=void 0),this._.themeOverride={theme:e,mode:n}}_showWidgetTableau(e,n){this._.widgetTableauSelection=n,this._.showWidgetTableau=e}_addCallback(e,n){this.globalActions.addCallbacks({[e]:n})}_clearNudgeInteractions(e){e?this._.endUserStore.data={nudgeInteractions:{...this._.endUserStore.data.nudgeInteractions,[e]:Xt()}}:this._.endUserStore.data={nudgeInteractions:Object.fromEntries(Object.keys(this._.endUserStore.data.nudgeInteractions).map(n=>[n,Xt()]))},this._.endUserStore.pushData()}};f();var zo=async(t,e)=>{let n=(d,u)=>{let g=u.split("."),a=d;for(let p of g){if(!(p in a)){w.warn(`Engagement SDK method ${u} is not defined.`);return}a=a[p]}return a},r=async d=>{let u=[...d],g=u.shift(),a=n(t,g);if(a)if(Pt.includes(g))if(u[0]instanceof Function){let p=u.shift(),l=u.shift();try{await a.bind(t)(...u).then(p,l)}catch(c){w.error(c)}}else await a.bind(t)(...u);else await a.bind(t)(...u)},i=(async d=>{do{let u=e.findIndex(a=>(a==null?void 0:a[0])===d);if(u===-1)break;let g=e.splice(u,1)[0];await r(g)}while(!0)})("boot"),s=[];for(;e.length>0;){let d=e.shift();if(!d)continue;let u=d[0];if(u==="boot"){s.push(d);continue}Uo.includes(u)?(w.debug("Scheduling async call",u),await r(d),w.debug("Finished async call",u)):(w.debug("Scheduling sync call",u),r(d).catch(g=>{throw w.warn(`Error processing queued call for ${u}`,g),g}),w.debug("Finished sync call",u))}return e.length=0,i.then(async()=>{for(let d=0;d<s.length;d++){let u=s[d];await r(u)}}),t};f();var $s=4,Fs=500,zs=500,Ko=t=>{let e,n=0,r=0,o=()=>{let i=Date.now();i-r<=zs&&(n+=1,clearTimeout(e),e=setTimeout(()=>n=0,Fs)),r=i,n>=$s&&(t.messageBus.publish("rage_click"),n=0,clearTimeout(e))};return document.body.addEventListener("click",o),()=>{document.body.removeEventListener("click",o)}};f();var Ho=t=>{let i=0,s=-1,d=-1,u=-1,g,a=p=>{let{clientX:l,clientY:c,timeStamp:m}=p;if(s!==-1&&d!==-1&&u!==-1){let h=Math.abs(l-s),b=Math.abs(c-d);Math.sqrt(h**2+b**2)/(m-u)>5&&m-u<=100&&(i+=1,clearTimeout(g),g=setTimeout(()=>i=0,500)),i>=15&&(t.messageBus.publish("user_confusion"),i=0,clearTimeout(g))}s=l,d=c,u=m};return document.body.addEventListener("mousemove",a),()=>{document.body.removeEventListener("mousemove",a)}};f();var Wo=R(ro()),Ks=5e3,Hs=6e4,Go=t=>{let e=!1,n=()=>{e&&t.messageBus.publish("user_inactive")};setTimeout(()=>e=!0,Hs);let r=(0,Wo.default)(n,Ks);return document.body.addEventListener("mousemove",r),document.body.addEventListener("keydown",r),()=>{document.body.removeEventListener("mousemove",r),document.body.removeEventListener("keydown",r)}};f();var qo="gs-key";var Ws=t=>{switch(t){case"nudge":case"n":default:return"n"}},Gs=(t,e)=>{let r=new URLSearchParams(e).get(t);if(!r)return;let o=Ws(r[0]);if(!o)return;let i="share_modal",s=r[1];return isNaN(parseInt(s))&&s==="t"&&(i="trigger"),{type:o,flagKey:r.slice(1),source:i}},Yo=t=>{t.messageBus.subscribe("location_change",()=>{var n,r,o;(n=pe(t))==null||n.forEach(i=>{let s=i.getSnapshot(),d=s.context.nudge;s.matches({Step:"Render Loop"})&&ar(t,d)&&(i==null||i.send({type:"CLOSE"}))});let e=Gs(((r=t.organization)==null?void 0:r.shareLinkParam)||qo,t.location.search);if(e){let i=e.flagKey,s=Be(t);if((o=t.nudgesManager)==null||o.send({type:"HANDLE_SHARE_LINK",flagKey:i}),s.find(d=>d.flagKey===i)){let d=new URL(window.location.href);d.searchParams.delete(qo);let u=d.toString();window.history.replaceState({},document.title,u)}}rn(t,{trigger:{type:"active"},source:{type:"active"},overrides:{cooldown:!0,customThrottles:!0,page:!0}}),rn(t,{trigger:{type:"immediately"},source:{type:"trigger",properties:{triggerType:"immediately"}}})})};f();var Vo=t=>{let e=n=>{let r=n.data.action;if(r)r==="startDebugSession"?t.messageBus.publish("start_debug",{event:n}):r==="startRecorderSession"&&t.messageBus.publish("start_recorder",{event:n});else return};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}};f();f();var jo=R(ro());var qs={observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]},debounceMs:150},Ot=class{constructor(e,n,r=[],o={}){this.mutationObserver=null;this.processMutationsImmediately=()=>{if(this.mutationObserver)try{this.onMutations()}catch(e){w.error("Error processing mutations:",{error:e})}};this.handleMutations=e=>{try{e.some(r=>this.shouldProcessMutation(r))&&this.processMutationsDebounced()}catch(n){w.error("Error handling mutations:",{error:n,mutationCount:e.length})}};this.target=e,this.onMutations=n,this.filters=r,this.options={...qs,...o},this.processMutationsDebounced=(0,jo.default)(this.processMutationsImmediately,this.options.debounceMs,{maxWait:this.options.debounceMs*2})}shouldProcessMutation(e){if(this.filters.length===0)return!0;try{return this.filters.every(n=>n(e))}catch(n){return w.error("Error in mutation filter:",{error:n,mutation:e}),!1}}cleanup(){var e;this.processMutationsDebounced.cancel(),(e=this.mutationObserver)==null||e.disconnect(),this.mutationObserver=null}observe(){return this.mutationObserver&&this.cleanup(),this.mutationObserver=new MutationObserver(this.handleMutations),this.mutationObserver.observe(this.target,this.options.observerOptions),()=>{this.cleanup()}}};var Ys=t=>!(Ue(t.target)||Array.from(t.addedNodes).some(Ue)||Array.from(t.removedNodes).some(Ue)),Zo=t=>new Ot(document.documentElement,()=>{t.messageBus.publish("dom_mutation")},[Ys]).observe();f();f();var ee=R(K());f();var Je=R(K());f();var H=R(K()),Xo=t=>H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:56,height:60,viewBox:"0 0 56 60",fill:"none",...t},H.createElement("g",{filter:"url(#filter0_dd_2060_1547)"},H.createElement("path",{d:"M12.9462 13.2111C12.6856 12.4293 13.4293 11.6856 14.2111 11.9462L43.2264 21.618C44.1557 21.9277 44.1316 23.2504 43.1917 23.5262L29.2847 27.6067C28.958 27.7026 28.7025 27.958 28.6067 28.2847L24.5262 42.1917C24.2504 43.1317 22.9277 43.1557 22.6179 42.2264L12.9462 13.2111Z",fill:"var(--base-accent)"}),H.createElement("path",{d:"M13.4205 13.053C13.2902 12.6621 13.6621 12.2902 14.053 12.4205L43.0683 22.0923C43.5329 22.2472 43.5209 22.9085 43.051 23.0464L29.1439 27.1269C28.6539 27.2707 28.2707 27.6539 28.1269 28.1439L24.0464 42.051C23.9085 42.5209 23.2472 42.533 23.0923 42.0683L13.4205 13.053Z",stroke:"var(--background-primary)"})),H.createElement("defs",null,H.createElement("filter",{id:"filter0_dd_2060_1547",x:.893066,y:4.89319,width:55.0171,height:55.017,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},H.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),H.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),H.createElement("feOffset",null),H.createElement("feGaussianBlur",{stdDeviation:1}),H.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),H.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.24 0"}),H.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2060_1547"}),H.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),H.createElement("feOffset",{dy:5}),H.createElement("feGaussianBlur",{stdDeviation:6}),H.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),H.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"}),H.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_2060_1547",result:"effect2_dropShadow_2060_1547"}),H.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_2060_1547",result:"shape"}))));f();var Jo={Close:"cursor-close",Content:"engagement-nudge-cursor-content"};f();var Rt=t=>{let e=window.innerWidth/2,{x:n}=ht(t.getBoundingClientRect()),r=n<e?"right-start":"left-start";return{initialPlacement:r,computeFinalPosition:async(o,i)=>{var a,p,l,c,m;let{x:s,y:d,placement:u,middlewareData:g}=await qr(t,o,{placement:r,middleware:[Hr({mainAxis:(a=i==null?void 0:i.mainAxisOffset)!=null?a:0,crossAxis:(p=i==null?void 0:i.crossAxisOffset)!=null?p:0}),Wr({mainAxis:!0,crossAxis:!1,padding:{left:(l=i==null?void 0:i.padding)!=null?l:0,right:(c=i==null?void 0:i.padding)!=null?c:0}}),...(m=i==null?void 0:i.middleware)!=null?m:[]]});return{x:s,y:d,placement:u,middlewareData:g}}}},Qo=(t,e,n)=>{let r=n==="counter-clockwise"?-1:1,o=[r*t*.2,-e*.5],i=[r*t*.7,-e*.8],s=[r*t,-e*.5],d=[r*t*.6,-e*.1],u="0 0",g=`C 0 ${e*-.3} ${r*t*.2} ${e*-.5} ${o[0]} ${o[1]-8}`,a=`C ${r*t*.4} ${e*-.7} ${r*t*.5} ${e*-.8} ${i[0]-8} ${i[1]}`,p=`C ${r*t*.9} ${e*-.8} ${r*t} ${e*-.7} ${s[0]} ${s[1]}`,l=`C ${r*t} ${e*-.3} ${r*t*.8} ${e*-.2} ${d[0]} ${d[1]}`,c=`C ${r*t*.3} 0 ${r*t*.2} 0 ${u}`;return`M ${u} ${g} ${a} ${p} ${l} ${c}`};function*ei(t,e,n){let r=n,o=0,i=e-t+1;for(;;){let s,d=0,u=i/r;do s=Math.floor(Math.random()*i)+t,d++,d>u&&(r=Math.max(r-1,1),d=0);while(Math.abs(s-o)<r);o=s,yield s}}f();var Dt=R(K());var hn=1350,ti=200,yn=200,bn=450,we=24,ge=8,Vs=(t,e)=>{let n=e?e.clientHeight:window.innerHeight,r=e?e.clientWidth:window.innerWidth,o=e?e.scrollTop:window.scrollY,i=e?e.scrollLeft:window.scrollX;return t.bottom<o||t.top>o+n||t.right<i||t.left>i+r},js=Dr({types:{context:{},events:{},input:{}},actions:{updateContainerPosition:an({cursor:({context:t,event:e})=>e.type!=="POSITION_CONTAINER"?t.cursor:{...t.cursor,position:{...t.cursor.position,container:{coordinates:e.coordinates,placement:e.placement}}}}),updateArrowPosition:an({cursor:({context:t,event:e})=>e.type!=="POSITION_ARROW"?t.cursor:{...t.cursor,position:{...t.cursor.position,arrow:{...t.cursor.position.arrow,coordinates:e.coordinates}}}}),removeCursor:({context:t})=>{t.handleDestroy()},hideAssistant:()=>{},showMask:()=>{},hideMask:()=>{}},actors:{adjustPlacement:Te(({sendBack:t,input:e})=>{let{targetElement:n,cursor:r,offset:o}=e;(async()=>{var l,c;let s=r.ref.current;if(!(n&&s&&r.ref.current))return t({type:"POSITION_CONTAINER",...r.position.container});let d=document.getElementById("engagement-toast-container");d&&(d.style.zIndex=`${ne.Z_NUDGE+1}`);let u=r.ref.current.getBoundingClientRect().width,{computeFinalPosition:g}=Rt(n),{placement:a}=await g(s,{mainAxisOffset:-ge+Z((l=o==null?void 0:o.x)!=null?l:"0"),crossAxisOffset:-ge-Z((c=o==null?void 0:o.y)!=null?c:"0"),padding:u+we}),p=a==="right-start"?r.position.container.coordinates.map(m=>m-we):[r.position.container.coordinates[0]-u-we-ge,r.position.container.coordinates[1]-we];t({type:"POSITION_CONTAINER",placement:a,coordinates:p})})()}),scrollToTargetElement:Te(({sendBack:t,input:e})=>{let{targetElement:n}=e;if(!n){t({type:"DESTROY"});return}let r=n.getBoundingClientRect(),o=Xr(n);if(Vs(r,o)){let i=ht(r),s=o||document.documentElement||window,d=Jr(i,s,{isScrollableContainer:!!o}),u=[null,null],g=setInterval(()=>{let a=[n.getBoundingClientRect().x,n.getBoundingClientRect().y];u[0]===a[0]&&u[1]===a[1]?t({type:"FINISHED_SCROLLING"}):u=a},100);return Qr(o||window,{behavior:"smooth",left:d.x,top:d.y}),()=>{clearInterval(g)}}t({type:"FINISHED_SCROLLING"})}),moveCursorToTarget:Te(({sendBack:t,input:e})=>{let{targetElement:n,cursor:r,offset:o}=e;(async()=>{var l,c;let s=r.ref.current;if(!(n&&s&&r.ref.current)){t({type:"DESTROY"});return}let d=r.ref.current.getBoundingClientRect().width,{computeFinalPosition:u}=Rt(n),{x:g,y:a,placement:p}=await u(s,{mainAxisOffset:-ge+Z((l=o==null?void 0:o.x)!=null?l:"0"),crossAxisOffset:-ge-Z((c=o==null?void 0:o.y)!=null?c:"0"),padding:d+we});t({type:"POSITION_CONTAINER",coordinates:[g,a],placement:p})})()}),trackTargetElement:Te(({sendBack:t,input:e})=>{var c,m;let{targetElement:n,cursor:r,offset:o}=e,i=r.ref.current;if(!(n&&i)){t({type:"DESTROY"});return}let s=document.getElementById("engagement-toast-container");s&&(s.style.zIndex=ne.Z_NUDGE.toString());let d=-ge+Z((c=o==null?void 0:o.x)!=null?c:"0"),u=-ge-Z((m=o==null?void 0:o.y)!=null?m:"0"),a=Kr(n,i,async()=>{var P,B,M,Y,te,le,Se;if(!r.ref.current)return;let h=r.ref.current.getBoundingClientRect().width,{initialPlacement:b,computeFinalPosition:y}=Rt(n),{x:v,y:E,placement:U,middlewareData:C}=await y(i,{mainAxisOffset:d,crossAxisOffset:u,padding:h+we,middleware:[Gr({strategy:"escaped",padding:{top:-Z((P=o==null?void 0:o.y)!=null?P:"0"),bottom:Z((B=o==null?void 0:o.y)!=null?B:"0"),...b==="right-start"?{right:-Z((M=o==null?void 0:o.x)!=null?M:"0"),left:Z((Y=o==null?void 0:o.x)!=null?Y:"0")}:{right:Z((te=o==null?void 0:o.x)!=null?te:"0"),left:-Z((le=o==null?void 0:o.x)!=null?le:"0")}}})]});t({type:"POSITION_CONTAINER",coordinates:[v,E],placement:U}),(Se=C.hide)!=null&&Se.escaped?t({type:"HIDE"}):t({type:"SHOW"})}),p=()=>{a(),l.disconnect(),t({type:"DESTROY"})},l=new MutationObserver(h=>{for(let b of h)if(b.type==="childList")for(let y of b.removedNodes)(y===n||y.contains(n))&&p()});return l.observe(document.documentElement,{childList:!0,subtree:!0}),()=>{p()}}),handleTargetClick:Te(({input:t})=>{let{onTargetElementClick:e}=t;return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}}),animateCursor:Te(({sendBack:t,input:e})=>{let{cursor:n}=e,r=1e3,o=2e3,u=ei(-4,8,4),g,a=()=>{let p=[-1*u.next().value,n.position.container.placement==="right-start"?-1*u.next().value:u.next().value];t({type:"POSITION_ARROW",coordinates:p});let l=Math.floor(Math.random()*o)+r;g=setTimeout(a,l)};return g=setTimeout(a,Math.floor(Math.random()*o)+r),()=>{clearTimeout(g)}})},delays:{crossFade:400,translation:hn,popIn:yn,tracing:bn}}).createMachine({id:"Cursor",initial:"computingPlacement",context:({input:t})=>t,states:{computingPlacement:{invoke:{src:"adjustPlacement",input:({context:t})=>t},on:{POSITION_CONTAINER:{target:"poppingIn",actions:"updateContainerPosition"}}},poppingIn:{after:{popIn:"scrolling"}},scrolling:{invoke:{src:"scrollToTargetElement",input:({context:t})=>t},on:{FINISHED_SCROLLING:"movingToTargetElement"}},movingToTargetElement:{invoke:{src:"moveCursorToTarget",input:({context:t})=>t},entry:"hideAssistant",on:{POSITION_CONTAINER:{actions:"updateContainerPosition"}},after:{translation:"tracingTarget"}},tracingTarget:{after:{tracing:"pinned"}},pinned:{entry:"showMask",exit:"hideMask",invoke:[{src:"trackTargetElement",input:({context:t})=>t},{src:"handleTargetClick",input:({context:t})=>t}],initial:"shown",states:{shown:{initial:"swappingBody",states:{swappingBody:{after:{crossFade:"idle"}},idle:{invoke:{src:"animateCursor",input:({context:t})=>t},on:{POSITION_ARROW:{actions:"updateArrowPosition"}}}},on:{HIDE:"hidden"}},hidden:{on:{SHOW:"shown.idle"}}},on:{POSITION_CONTAINER:{actions:"updateContainerPosition"}}}},on:{DESTROY:{actions:"removeCursor"}}});var de={hasComputedPlacement:t=>t.value!=="computingPlacement",isPoppingIn:t=>t.value==="poppingIn",isMovingToTargetElement:t=>t.value==="movingToTargetElement",isTracingTargetElement:t=>t.value==="tracingTarget",isSwappingBody:t=>{let e=t.value;return typeof e=="object"&&"pinned"in e&&typeof e.pinned=="object"&&"shown"in e.pinned&&e.pinned.shown==="swappingBody"},isShowingPartialBody:t=>{let e=t.value;return typeof e=="string"?["poppingIn","scrolling","movingToTargetElement","tracingTarget"].includes(e):typeof e=="object"&&"pinned"in e&&typeof e.pinned=="object"&&"shown"in e.pinned?e.pinned.shown==="swappingBody":!1},isRenderingFullBody:t=>typeof t.value=="object"&&"pinned"in t.value,isHidingPin:t=>typeof t.value=="object"&&"pinned"in t.value&&t.value.pinned==="hidden",isShowingPin:t=>{let e=t.value;return typeof e=="object"&&"pinned"in e&&typeof e.pinned=="object"&&"shown"in e.pinned}},W=Br(js),ni=({children:t,offset:e,anchor:n,handleDestroy:r,startCoordinates:o,shouldShowMask:i,onTargetElementClick:s})=>{let d=(0,Dt.useRef)(null);return Dt.default.createElement(W.Provider,{options:{input:{offset:e,targetElement:ye(n),shouldShowMask:i!=null?i:!1,handleDestroy:r,onTargetElementClick:s,cursor:{position:{container:{coordinates:o,placement:"right-start"},arrow:{coordinates:[0,0]}},ref:d}}}},t)};var Zs=56,Xs=Ye`
  0% {
    offset-distance: 0%;
  }
  100% {
    offset-distance: 100%;
  }
`,Js=()=>{let t=W.useSelector(({context:i})=>i.cursor.position.container.placement),e=W.useSelector(de.isTracingTargetElement),n=W.useSelector(de.isShowingPin),[r,o]=W.useSelector(({context:i})=>i.cursor.position.arrow.coordinates);return k(Xo,{style:{transition:n?`transform ${ti}ms cubic-bezier(0.78, -0.28, 0.07, 1)`:void 0,transform:t==="right-start"?`translate(${ke(r)}px, ${ke(o)}px)`:`rotate(90deg) translate(${ke(r)}px, ${ke(o)}px)`,offsetRotate:"0deg"},css:e?{offsetPath:`path("${Qo(50,30,t==="right-start"?"counter-clockwise":"clockwise")}")`,transformOrigin:t==="right-start"?"0px 0px":"-2px 58px",animation:`${Xs} ${bn}ms forwards cubic-bezier(0.45, 0, 0.55, 1)`}:void 0})},Qs=Ye`
  from {
    scale: 1;
    opacity: 100%;
  }
  to {
    scale: 0.8;
    opacity: 20%;
  }
`,ea=Ye`
  0% {
    scale: 1;
    opacity: 1;
  }
  75%, 100% {
    scale: 1.25;
    opacity: 0;
  }
`,ta=()=>{let t=W.useSelector(de.isPoppingIn),e=W.useSelector(de.isSwappingBody),n=W.useSelector(({context:r})=>r.cursor.position.container.placement);return k("div",{style:{position:"relative",gridRowStart:1,gridColumnStart:1,display:"inline-flex",padding:"var(--card-padding, 12px)",alignItems:"center",gap:"var(--card-gap, 8px)",borderRadius:n==="right-start"?"0px var(--card-radius, 8px) var(--card-radius, 8px) var(--card-radius, 8px)":"var(--card-radius, 8px) 0px var(--card-radius, 8px) var(--card-radius, 8px)",border:"1px solid var(--border-primary, #E2E2E2)",background:"var(--background-primary, #FFF)",boxShadow:"0px 4px 16px 0px rgba(0,0,0,0.1)",justifySelf:n==="right-start"?void 0:"flex-end",transformOrigin:"top left"},css:{animation:e?`${Qs} 200ms forwards cubic-bezier(.42, 0, .59, 1.33)`:void 0,"&::before":{content:'""',width:"100%",height:"100%",zIndex:-1,background:"var(--base-accent)",position:"absolute",top:0,left:0,opacity:0,borderRadius:n==="right-start"?"0px var(--card-radius, 8px) var(--card-radius, 8px) var(--card-radius, 8px)":"var(--card-radius, 8px) 0px var(--card-radius, 8px) var(--card-radius, 8px)",animation:t?`${ea} 200ms forwards cubic-bezier(0, 0, 0.2, 1)`:void 0}}},k(oo,null))},ri=Ye`
  from {
    scale: 0.8;
    opacity: 40%;
  }
  to {
    scale: 1;
    opacity: 100%;
  }
`,na=({nudge:t,step:e})=>{let n=D(),{send:r}=W.useActorRef(),o=(0,Je.useCallback)(()=>{r({type:"DESTROY"})},[r]),i=(0,Je.useCallback)(()=>{o()},[o]),s=W.useSelector(({context:d})=>d.cursor.position.container.placement);return k(Zr,{organization:n.organization,survey:!!e.content.find(d=>d.type==="survey_rating"),"data-testid":Jo.Content,"aria-labelledby":"engagement-nudge-title",tabIndex:-1,style:{gridRowStart:1,gridColumnStart:1,borderTopLeftRadius:s==="right-start"?0:void 0,borderTopRightRadius:s==="left-start"?0:void 0,zIndex:ne.Z_NUDGE+1,transformOrigin:"top left"},css:{animation:`${ri} 200ms forwards cubic-bezier(.42, 0, .59, 1.33)`}},k(Fe,{nudge:t,step:e,renderMode:0,handleLinkClick:i,stepIndex:0}))},ra=({nudge:t,step:e})=>{let n=W.useSelector(de.isShowingPartialBody),r=W.useSelector(de.isRenderingFullBody),o=W.useSelector(({context:i})=>i.cursor.position.container.placement);return k("div",{style:{display:"grid",position:"relative",placeItems:"start",top:"36px",marginLeft:o==="right-start"?"-18px":void 0,marginRight:o==="right-start"?void 0:"-18px",width:"var(--popover-width)"}},n&&k(ta,null),r&&k(na,{nudge:t,step:e}))},oa=({children:t})=>{var a;let e=W.useSelector(de.hasComputedPlacement),n=W.useSelector(de.isMovingToTargetElement),r=W.useSelector(de.isHidingPin),[o,i]=W.useSelector(({context:p})=>p.cursor.position.container.coordinates),s=W.useSelector(({context:p})=>p.cursor.position.container.placement),d=W.useSelector(({context:p})=>p.cursor.ref),u=()=>r?"hidden":e?"visible":"hidden",g=(0,Je.useMemo)(()=>{var p;return(p=d.current)==null?void 0:p.getBoundingClientRect().width},[(a=d.current)==null?void 0:a.getBoundingClientRect]);return k("div",{ref:d,style:{display:"flex",flexDirection:s==="right-start"?"row":"row-reverse",visibility:u(),transform:`translate(${ke(o)}px, ${ke(i)}px)`,transition:n?`transform ${hn}ms cubic-bezier(0.78, -0.28, 0.07, 1)`:void 0,transformOrigin:`${s==="right-start"?o:o+(g!=null?g:0)+we+ge+Zs}px ${i}px`},css:{animation:e?`${ri} ${yn}ms forwards cubic-bezier(.42, 0, .59, 1.33)`:void 0}},t)},oi=({nudge:t,step:e,handleDestroy:n,sourceCoordinates:r,onTargetElementClick:o})=>{var i;return k(ni,{anchor:((i=e.formFactor.anchorSelector)==null?void 0:i.selector)||e.formFactor.anchor,offset:e.formFactor.offset,startCoordinates:r,handleDestroy:n,shouldShowMask:e.formFactor.isShowingMask,onTargetElementClick:o},k(re,{nudge:t},k(oa,null,k(Js,null),k(ra,{nudge:t,step:e}))))};f();var $=R(K()),ci=R(Rn());f();var Qe=R(K());f();var ii=R(K());var ia=Ee({minWidth:"300px"}),sa=V.div`
  display: flex;
  position: relative;

  max-height: var(--card-max-height); // TODO: Implement max-height
  flex-direction: column;
  align-items: flex-start;
  pointer-events: all;
  overflow: hidden;

  border-radius: var(--layout-radius-card);
  border: 1px solid var(--border-primary);
  background: var(--background-primary);

  box-shadow: var(--layout-shadow) var(--layout-shadow-color);

  transition: var(--card-anim-transition-property, opacity) var(--card-anim-transition-duration, 0.3s)
    var(--card-anim-transition-timing, ease-in-out);

  a {
    color: var(--content-link);
    text-decoration: none;

    &:hover {
      color: var(--content-link-hover);
      text-decoration: underline;
    }
  }
`,aa=ii.default.forwardRef(({survey:t,organization:e,children:n,...r},o)=>{let{className:i,...s}=r;return k(sa,{ref:o,css:t&&ia,...s,className:`amplitude-engagement-card${i?` ${i}`:""}`},n)}),si=aa;var ca=(t,e)=>{if(t.formFactor.layout==="horizontal"&&!e)return"auto";let n=t.formFactor.cardWidth;if(n){if(n.type==="auto")return"auto";if(n.type==="full")return"100%";if(n.type==="fixed"&&n.value!=null)return`${n.value}px`}},da=t=>{let e=t.formFactor.cardHeight;if(e){if(e.type==="auto")return"auto";if(e.type==="full")return"100%";if(e.type==="fixed"&&e.value!=null)return`${e.value}px`}},la=t=>{let e=t.formFactor.cardHeight;return(e==null?void 0:e.type)==="fixed"&&e.value!=null},ai=(0,Qe.forwardRef)(({nudge:t,step:e,renderMode:n,handleLinkClick:r,stepIndex:o},i)=>{let s=D(),d=n!==1?J(s,t.variantId):void 0,{isMobileDevice:u}=Le(),{animStyles:g,isAnimatedWidget:a}=ae();return Qe.default.createElement(si,{organization:s.organization,survey:!!e.content.find(p=>p.type==="survey_rating"),"data-testid":"engagement-nudge-card-content",ref:i,style:{width:ca(e,u),height:da(e),...!a&&{visibility:"visible"},...g},"aria-labelledby":"engagement-nudge-title",className:"amplitude-engagement-card-content"},Qe.default.createElement(Fe,{nudge:t,step:e,renderMode:n,handleLinkClick:r,stepIndex:o,actor:d,hasFixedHeight:la(e)}))});var ua=(0,$.createContext)(null),pa=()=>(0,$.useContext)(ua),ma=t=>{let{messageBus:e}=D(),[n,r]=(0,$.useState)(()=>t?ye(t):void 0);return(0,$.useEffect)(()=>{if(!t){r(void 0);return}let o=ye(t);r(o);let i=()=>{let s=ye(t);r(s)};return e.subscribe("dom_mutation",i,`card_element_watcher_${t}`),()=>{e.unsubscribe("dom_mutation",`card_element_watcher_${t}`)}},[t,e]),n},di=(0,$.createContext)(void 0),vn=()=>{let t=(0,$.useContext)(di);if(t==null)throw new Error("Card components must be wrapped in <CardProvider />");return t},ga=({nudge:t,step:e,renderMode:n,stepIndex:r,anchorOverride:o,children:i})=>{var p;let s=D(),d=o||((p=e.formFactor.anchorSelector)==null?void 0:p.selector)||e.formFactor.anchor,u=ma(d),g=n===1&&(!u||s.isEditorPreview),a=n===1?void 0:J(s,t.variantId);return jr(e),k(di.Provider,{value:{nudge:t,step:e,actor:a,renderMode:n,stepIndex:r,shouldRenderUnanchoredMock:g,anchorOverride:o,targetElement:u}},i)},fa=(t="center")=>{switch(t){case"start":return"flex-start";case"end":return"flex-end";case"center":default:return"center"}},ha=t=>{var u;let{step:e,targetElement:n,shouldRenderUnanchoredMock:r,actor:o}=vn(),[i,s]=(0,$.useState)(null),d=(0,$.useRef)(!1);return(0,$.useEffect)(()=>{d.current=!1},[n]),(0,$.useEffect)(()=>{var l,c,m;if(r||!n)return;let g=document.createElement("div");switch(g.className=`engagement-card-portal-container ${t}`,((l=e.formFactor.cardHeight)==null?void 0:l.type)==="full"&&(g.style.height="100%"),e.formFactor.position){case"prepend":n.prepend(g);break;case"append":n.append(g);break;case"replace":n.innerHTML="",n.append(g);break;case"before":(c=n.parentElement)==null||c.insertBefore(g,n);break;case"after":(m=n.parentElement)==null||m.insertBefore(g,n.nextSibling);break}s(g);let p=new IntersectionObserver(([h])=>{h.isIntersecting&&!d.current&&(d.current=!0,o==null||o.send({type:"STEP_VISIBLE"}))},{threshold:.25});return p.observe(g),()=>{p.disconnect(),g.parentElement&&g.remove(),s(null)}},[e.formFactor.position,(u=e.formFactor.cardHeight)==null?void 0:u.type,n,r,o,t]),i},ya=({customStyles:t,children:e})=>{var y;let{isEditorPreview:n}=D(),{nudge:r,step:o,renderMode:i,shouldRenderUnanchoredMock:s,targetElement:d}=vn(),{generatedCSSClassname:u}=he(),g=pa(),{animStyles:a,onEnter:p}=ae(),l=(0,$.useRef)(!1),c=ha(u);(0,$.useEffect)(()=>{let v=c||s;v&&!l.current?(l.current=!0,p()):v||(l.current=!1)},[c,s,p]);let m=(0,$.useMemo)(()=>s||n?{position:"relative",margin:"20px auto"}:{},[s,n]),h=(0,$.useMemo)(()=>{var U;let v=o.formFactor.alignment||"center",E=((U=o.formFactor.cardHeight)==null?void 0:U.type)==="full";return{display:"flex",justifyContent:fa(v),...E&&{height:"100%"}}},[o.formFactor.alignment,(y=o.formFactor.cardHeight)==null?void 0:y.type]);if(!d&&!s)return null;let b=k("div",{"data-testid":`engagement-card-${r.variantId}-${String(o.id)}${i===1?"-mock":""}`,className:`amplitude-engagement-card-container ${s?"engagement-unanchored-nudge-card":""} ${u}`,style:{...h,...m,...a,...t}},e);return c?(0,ci.createPortal)(g?k(dt,{value:g},b):b,c):b},ba=()=>{let t=D(),{actor:e,nudge:n,step:r,renderMode:o,stepIndex:i}=vn(),s=(0,$.useCallback)(()=>{o!==1&&Q(t,n,o)},[t,n,o]),d=vt(u=>xe.nudge.engaged(n,i,{...e==null?void 0:e.getSnapshot().context,source:{type:"link",url:u},interactionState:oe(t,n.variantId)}),s);return k(wt,{actor:e,step:r},k(bt,null,k(ai,{nudge:n,step:r,handleLinkClick:d,renderMode:o,stepIndex:i})))},li=({nudge:t,step:e,stepIndex:n,renderMode:r,anchorOverride:o,style:i})=>{let s=$e(Q);return k(re,{nudge:t},k(yt,{widget:"popover",keepMounted:!0,isOpenByDefault:!0,defaultExitAction:()=>{r!==1&&s(t,r)}},k(ga,{nudge:t,step:e,renderMode:r,stepIndex:n,anchorOverride:o},k(ya,{customStyles:i},k(ba,{key:e.id})))))};var ui=(t,e,n,r={})=>{var u,g,a,p,l;if((a=(g=(u=Ce())==null?void 0:u[N])==null?void 0:g.options)!=null&&a.headless)return;let o=(p=r==null?void 0:r.renderMode)!=null?p:0;e=fr(e,t);let i=lt(e);if(ut(e)){t.activeChecklist={nudge:e,renderMode:o,defaultOpenIdx:o===1?n:void 0};return}if(dr(e)){let[c]=e.steps,m=`${e.variantId}-${String(c.id)}${o===1?"-mock":""}`;Ae(m,{asChild:!0,element:ee.default.createElement(Vr,{forceOpen:r==null?void 0:r.forceOpen,nudge:e,renderMode:o,step:c,anchorOverride:r==null?void 0:r.anchorOverride,handleDestroy:()=>Q(t,e,o),onMarkerView:()=>{if(o===1)return;let h=J(t,e.variantId);xe.nudge.tooltipMarkerViewed(e,n,{...h==null?void 0:h.getSnapshot().context,interactionState:oe(t,e.variantId)})},onOpen:()=>{o!==1&&xe.nudge.viewed(e,n,{...r.context,interactionState:oe(t,e.variantId)})}})});return}if(lr(e)){let[c]=e.steps,m=`${e.variantId}-${String(c.id)}${o===1?"-mock":""}`;wo(m,{element:ee.default.createElement(to,{nudge:e,stepIndex:n,renderMode:o}),sticky:c==null?void 0:c.formFactor.sticky,position:c==null?void 0:c.formFactor.position});return}let s=se(e,n),d=()=>{i&&Q(t,e,o)};switch(s==null?void 0:s.formFactor.type){case"popover":{let c=`${e.variantId}-${String(s.id)}${o===1?"-mock":""}`,m=s.formFactor.position==="center";Ae(c,{element:ee.default.createElement(cn,{nudge:e,renderMode:o,stepIndex:n,center:m}),position:s.formFactor.position,duration:Number.POSITIVE_INFINITY,hasWideContent:Qt(s),themeProvider:({children:h})=>ee.default.createElement(re,{nudge:e},h),onEscapeKeyDown:d});break}case"modal":{t.currentModalNudge=rr({nudge:e,stepIndex:n,renderMode:o});break}case"pin":{if(pt(s)){let c=`${e.variantId}-${String(s.id)}${o===1?"-mock":""}`,{source:m}=r!=null?r:{};ur(e,s)&&(m==null?void 0:m.animateIn)&&m.startPosition?Ae(c,{element:ee.default.createElement(oi,{nudge:e,step:s,sourceCoordinates:m.startPosition,handleDestroy:()=>Q(t,e,o),onTargetElementClick:()=>mt(t,e)}),themeProvider:({children:b})=>ee.default.createElement(re,{nudge:e},b),onEscapeKeyDown:d,onEnterKeyDown:()=>mt(t,e)}):Ae(c,{element:ee.default.createElement(eo,{nudge:e,step:s,renderMode:o,stepIndex:n,anchorOverride:r==null?void 0:r.anchorOverride}),duration:Number.POSITIVE_INFINITY,themeProvider:({children:b})=>ee.default.createElement(re,{nudge:e},b),onEscapeKeyDown:d,onEnterKeyDown:()=>mt(t,e)})}break}case"card":{if(Ve(s)){let c=`${e.variantId}-card${o===1?"-mock":""}`;Ae(c,{asChild:!0,element:ee.default.createElement(li,{nudge:e,step:s,renderMode:o,stepIndex:n,anchorOverride:r==null?void 0:r.anchorOverride})})}break}default:{(l=Ln())==null||l.captureMessage(`Unknown form factor type: ${s==null?void 0:s.formFactor}`,"error",{captureContext:{tags:{product:"nudges"}}});let c=s&&Qt(s);Ae(`${e.variantId}-${String(s==null?void 0:s.id)}${o===1?"-mock":""}`,{element:ee.default.createElement(cn,{nudge:e,renderMode:o,stepIndex:n}),position:"top-right",duration:Number.POSITIVE_INFINITY,hasWideContent:c,themeProvider:({children:m})=>ee.default.createElement(re,{nudge:e},m),onEscapeKeyDown:d})}}};f();var pi=(t,e)=>{let n=ye(t);if(!n)return;let r=()=>{e()};return n.addEventListener("click",r),()=>n.removeEventListener("click",r)};f();var mi=(t,e)=>{var r,o;((r=t.currentModalNudge)==null?void 0:r.renderMode)===1&&(t.currentModalNudge=null),((o=t.activeChecklist)==null?void 0:o.renderMode)===1&&(t.activeChecklist=null);let n=se(e,0);if(Ve(n)){je(`${e.variantId}-card-mock`);return}for(let i=0;i<e.steps.length;i++){let s=se(e,i);je(`${e.variantId}-${String(s==null?void 0:s.id)}-mock`),mn(`${e.variantId}-${String(s==null?void 0:s.id)}-mock`)}},gi=t=>{var e,n;Or(/-mock$/),So(/-mock$/),((e=t.currentModalNudge)==null?void 0:e.renderMode)===1&&(t.currentModalNudge=null),((n=t.activeChecklist)==null?void 0:n.renderMode)===1&&(t.activeChecklist=null)},fi=(t,e,n)=>{var o;let r=se(e,n);if(ut(e)){if(!t.activeChecklist)return;t.activeChecklist=null}else Ve(r)?je(`${e.variantId}-card`):pr(r)&&((o=t.currentModalNudge)==null?void 0:o.renderMode)!==1?t.currentModalNudge=null:(je(`${e.variantId}-${String(r==null?void 0:r.id)}`),mn(`${e.variantId}-${String(r==null?void 0:r.id)}`))};f();var hi=(t,e)=>{no(t,e)},yi=(t,e)=>{t.resourceCenter.currentContentItemId=e?e.toString():null},bi=(t,e)=>{t.resourceCenter.previewedRecommendationSet=e},vi=(t,e,n)=>{t.resourceCenter={...t.resourceCenter,...e,previewedAdditionalResources:n}},wi=(t,e)=>{t.resourceCenter.customAutopilotKeywords=e};f();var Si=async(t,e)=>{var r,o;let n=()=>{};switch((r=e==null?void 0:e.meta)==null?void 0:r.type){case"intercom":n=()=>window.Intercom("showNewMessage");break;case"helpscout":n=()=>window.Beacon("open");break;case"freshdesk":n=()=>window.FreshworksWidget("open");break;case"freshchat":{n=async()=>window.fcWidget.open();break}case"gist":n=()=>window.gist.chat("open");break;case"crisp":n=()=>{window.$crisp.push(["do","chat:open"]),window.$crisp.push(["do","chat:show"])};break;case"talkdesk_v2":n=()=>{window.webchat.open()};break;case"zendesk":{n=()=>{try{window.zE("messenger","open")}catch(i){window.zE("webWidget","open"),window.zE("webWidget","show")}};break}case"liveChat":n=()=>window.LiveChatWidget.call("maximize");break;case"olark":n=()=>window.olark("api.box.expand");break;case"hubspot":n=()=>window.HubSpotConversations.widget.open();break;case"drift":n=()=>window.drift.api.openChat();break;case"pylon":n=()=>window.Pylon("show")}try{await n()}catch(i){(o=X())==null||o.captureException(i)}},Ci=(t,e,n)=>{let r=gr(e.value,t,!0);if(n){window.open(r,"_blank");return}switch(e.operation){case"router":{let o=t.callbacks["engagement-router"];if(o)o(r);else throw new mr("Link is of router type, but router is not defined.");break}case"self":window.open(r,"_self");break;case"blank":window.open(r,"_blank");break;default:window.open(r,"_blank");break}},Ei=(t,e)=>{};var va=xi().UAParser,wa=()=>typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||"",Sa=t=>{var e,n;return[(e=t.browser)==null?void 0:e.name,(n=t.browser)==null?void 0:n.major].filter(r=>r!=null).join(" ")},Ca=t=>{var e;return(e=t.os)==null?void 0:e.name},Ea=t=>{var n;let e=(n=t.browser)==null?void 0:n.name;return e!=null&&e.includes("Chrom")&&(e="Chrome"),e!=null&&e.includes("Firefox")&&(e="Firefox"),e!=null&&e.includes("Safari")&&(e="Safari"),e!=null&&e.includes("Edge")&&(e="Edge"),e!=null&&e.includes("Opera")&&(e="Opera"),e||"Unknown"},xa=()=>{var t;if((t=window==null?void 0:window.document)!=null&&t.cookie)try{return Object.fromEntries(window.document.cookie.split("; ").map(e=>e.split("=")))}catch(e){return}},Ia=t=>{var e,n;try{let r=JSON.parse(nn.get(t,"{}"));return r.landing_url||(r.landing_url=(n=(e=window==null?void 0:window.location)==null?void 0:e.href)==null?void 0:n.replace(/\/$/,""),nn.set(t,JSON.stringify(r))),r.landing_url}catch(r){return}},Aa=t=>{try{let e=JSON.parse(ue.get(t,"{}"));return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),ue.set(t,JSON.stringify(e))),e.first_seen}catch(e){return}},Ta=()=>{var e;if(!(window!=null&&window.location))return;let t={};try{let n=new URL(window.location.href);for(let[r,o]of n.searchParams)t[r]=[...(e=t[r])!=null?e:[],...o.split(",")]}catch(n){return}return Object.entries(t).reduce((n,[r,o])=>(n[r]=o.length===1?o[0]:o,n),{})},ka=t=>{var r,o,i,s,d,u,g;let e=typeof(window==null?void 0:window.navigator)<"u"?window.navigator.userAgent:void 0,n=new va(e).getResult();return{language:wa(),platform:"Web",os:Sa(n),device_model:Ca(n),device_category:(o=(r=n.device)==null?void 0:r.type)!=null?o:"desktop",referring_url:(i=window==null?void 0:window.document)==null?void 0:i.referrer.replace(/\/$/,""),cookie:xa(),browser:Ea(n),landing_url:Ia(`ENGAGEMENT_${(d=(s=window.engagement)==null?void 0:s[N].apiKey)==null?void 0:d.slice(0,10)}_DEFAULT_USER_PROVIDER`),first_seen:Aa(`ENGAGEMENT_${(g=(u=window.engagement)==null?void 0:u[N].apiKey)==null?void 0:g.slice(0,10)}_DEFAULT_USER_PROVIDER`),url_param:Ta(),user_agent:e,...t}},Ii={renderNudge:ui,addClickListener:pi,clickElement:Ur,closeNudgeMock:mi,closeAllNudgeMocks:gi,closeStep:fi,onLocationChange:Nr,postMessageToDashboard:St,openChatExecutable:Si,linkExecutable:Ci,appReviewExecutable:Ei,getDefaultUIMode:kr,isElementVisible:$r,matchesSelector:Lr,showResourceCenter:hi,setCurrentContentId:yi,previewRecSet:bi,previewResourceCenter:vi,previewAutopilotKeywords:wi,enrichUser:ka,supportedBreakingFeatures:[vr]};f();var wn=async(t,e)=>{let n=await fetch(t,{...e,body:e.body!=""?e.body:void 0});return{status:n.status,statusText:n.statusText,headers:Object.fromEntries(n.headers.entries()),data:await n.text(),ok:n.ok}};typeof window<"u"?window.simpleFetch=wn:typeof globalThis<"u"?globalThis.simpleFetch=wn:typeof window<"u"&&(window.simpleFetch=wn);f();var _a=t=>{let e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(n)},Na=t=>{let e=atob(t),n=new TextEncoder().encode(e);return JSON.parse(new TextDecoder().decode(n))};globalThis.base64Encode=_a;globalThis.base64Decode=Na;f();var Pa=t=>!t.target||!Ue(t.target),Ai=t=>{let e=n=>{Pa(n)&&t.messageBus.publish("click",{event:{type:n.type,target:n.target,currentTarget:n.currentTarget,preventDefault:()=>n.preventDefault(),stopPropagation:()=>n.stopPropagation()}})};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}};f();var Ma=30,Oa=0,Ti=t=>{let e=null,n=()=>{t.messageBus.publish("exit_intent")},r=i=>{i.clientY>Ma||(e=setTimeout(n,Oa))},o=()=>{e&&(clearTimeout(e),e=null)};return document.documentElement.addEventListener("mouseleave",r),document.documentElement.addEventListener("mouseenter",o),()=>{document.body.removeEventListener("mouseleave",r),document.body.removeEventListener("mouseenter",o)}};f();var ki="gs-debug-id",_i=t=>{t.messageBus.subscribe("location_change",()=>{let n=new URLSearchParams(t.location.search).get(ki);if(n){let r=new URL(window.location.href);r.searchParams.delete(ki);let o=r.toString();window.history.replaceState({},document.title,o),Sr(t,{variantId:Number(n)},{toStepIndex:0})}})};var Ra=t=>{var r;let e=document.getElementById("engagement-wrapper"),n=document.getElementById("engagement-container");return e||(e=document.createElement("div"),e.setAttribute("id","engagement-wrapper"),e.setAttribute("data-engagement","1"),((r=t?document.getElementById(t):null)!=null?r:document.body).appendChild(e)),n||(n=document.createElement("div"),n.setAttribute("id","engagement-container"),n.setAttribute("data-engagement","1"),e.appendChild(n)),n},Da=t=>{switch(t){case"local":return"http://localhost:10001";case"EU":return"https://gs.eu.amplitude.com";default:return"https://gs.amplitude.com"}},Ba=t=>{switch(t){case"local":return"http://localhost:11001";case"EU":return"https://assistant-api.eu.amplitude.com";default:return"https://assistant-api.amplitude.com"}},Sn={local:"http://localhost:10002/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag2:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",rc:"https://cdn.amplitude.com/engagement-browser/rc/index.min.js.gz",prod:"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/index.min.js.gz"},Cn={local:"http://localhost:10002/split/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag2:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",rc:"https://cdn.amplitude.com/engagement-browser/rc/split/index.js",prod:"https://cdn.amplitude.com/engagement-browser/prod/split/index.js",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/split/index.js"},En={local:"http://localhost:10001",staging:"https://gs.stag2.amplitude.com",stag:"https://gs.stag2.amplitude.com",stag2:"https://gs.stag2.amplitude.com",prod:"https://gs.amplitude.com",prodUs:"https://gs.amplitude.com",prodEu:"https://gs.eu.amplitude.com"},xn={local:"http://localhost:11001",staging:"https://assistant-api.stag2.amplitude.com",stag:"https://assistant-api.stag2.amplitude.com",stag2:"https://assistant-api.stag2.amplitude.com",rc:"https://assistant-api.stag2.amplitude.com",prod:"https://assistant-api.amplitude.com",prodUs:"https://assistant-api.amplitude.com",prodEu:"https://assistant-api.eu.amplitude.com"};function La(t){let e={};return t.split(";").forEach(r=>{let[o,i]=r.split("=");o&&(e[o]=i)}),e}var Ni=async()=>{var m,h,b,y,v,E,U;let t=localStorage.getItem("amplitude.engagement.launchCode");if(t){let C=La(t),P=document.currentScript||document.getElementById("engagement-sdk-bundle");if(P){let B=window.engagement[N].options.splitting&&(C==null?void 0:C.sdk)!=="local",M=B?Cn==null?void 0:Cn[C==null?void 0:C.sdk]:Sn==null?void 0:Sn[C==null?void 0:C.sdk];if(M&&P.src!==M){(m=P.parentNode)==null||m.removeChild(P);let Y=document.createElement("script");Y.src=M,Y.id="engagement-sdk-bundle";let te=document.querySelector("[nonce]");te&&Y.setAttribute("nonce",te.nonce||te.getAttribute("nonce")),B&&Y.setAttribute("type","module"),document.getElementsByTagName("head")[0].appendChild(Y);return}}if(C!=null&&C.server){let B=En==null?void 0:En[C==null?void 0:C.server];B&&(window.engagement[N].serverUrl=B);let M=xn==null?void 0:xn[C==null?void 0:C.server];M&&(window.engagement[N].chatUrl=M)}}if(((h=window.engagement)==null?void 0:h._initStarted)===!0)return;window.engagement&&(window.engagement._initStarted=!0);let e=window.engagement,{apiKey:n,serverUrl:r,chatUrl:o}=e._configuration,i=e[N].serverZone,s=ue.get("takeover","");if(!n)throw new Error("Organization `apiKey` has not been set on the global _configuration object. Make sure you've called `init` before loading this script");let d=e[N].locale,u=ue.get("localeOverride","");u&&(e[N].locale=u),i||(e[N].serverZone="US",i="US"),e[N].serverUrl=r||Da(i),e[N].chatUrl=o||Ba(i),e[N].apiKey=n;let g=!!((b=e[N].options)!=null&&b.logger);(y=e[N].options)!=null&&y.logger||(e[N].options.logger=new Dn),(v=e[N].options)!=null&&v.logger&&e[N].options.logger.enable((U=(E=e[N].options)==null?void 0:E.logLevel)!=null?U:2),g?w.log("Using custom logger",e[N].options.logger):w.log("Using default logger"),s&&(e[N].apiKey=s),w.log("initializing client SDK..."),Pr();let a=document.getElementById("engagement-is-dashboard-preview-pane")!==null,p=document.getElementById("assistant-preview-pane-iframe")!==null,l=Ir({isEditorPreview:a,isAssistantPreview:p,platform:_r(),location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search},services:Ii,persistResourceCenter:e._configuration.options.persistResourceCenter});d&&(l.nudgeDebugToolBar.originalInitLocale=d),Ar(l),e._configuration.options.headless||(Ko(l),Ho(l),Go(l),Ti(l),Zo(l),Ai(l),Yo(l),_i(l)),Vo(l);let c=new Mt(l,e._configuration);if(c._sentry=Bn("https://86e449af9e7145de4804c2143988499b@o13027.ingest.us.sentry.io/4508580659462144"),await c._configUser(),c=await zo(c,e._q),Object.assign(window.engagement,c),Object.setPrototypeOf(window.engagement,c),e._configuration.options.headless)w.debug("Engagement bundle loaded in headless mode - no UI rendered");else{let C=Ra(e._configuration.options.mountElementId);Mi.default.render(Pi.default.createElement(_o,{store:l}),C),w.debug("Engagement bundle loaded and container rendered")}};St("ENGAGEMENT_LOADED");window.engagement?Ni().catch(console.error):window.engagement=$o(Ni);var vg=void 0;export{vg as default};
